import{r,c as m,j as n,aq as F,aG as y,d as S}from"./index-Dw4ryElV.js";function p({provider:s,displayName:e,visualConfig:t}){const[d,i]=r.useState(!1),[h,x]=r.useState(""),[a,c]=r.useState(!1),l=m("/api/auth/authorize/:provider"),g=r.useCallback(async()=>{i(!1),c(!0);try{const o=await l.call({pathParams:{provider:s}});if(!o.authorize_url)throw new Error(`Failed to get ${e} authorization URL`);window.location.href=o.authorize_url}catch(o){i(!0),x(`Failed to initiate ${e} login: ${o}`),console.error(`Failed to start ${e} login`,o)}finally{c(!1)}},[l,e,s]),u=r.useMemo(()=>{if(t?.buttonColor)return{backgroundColor:t.buttonColor,color:t.textColor||"#FFFFFF"}},[t]),f=r.useMemo(()=>a||!t?.iconSvg?null:n.jsx("span",{className:"flex items-center justify-center",dangerouslySetInnerHTML:{__html:t.iconSvg}}),[a,t?.iconSvg]);return n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsx(F,{children:d&&n.jsx(y.div,{className:"text-small text-danger",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3,ease:"easeOut"},children:h||`Failed to sign in with ${e}`})}),n.jsx(S,{onPress:g,color:u?void 0:"primary",style:u,isLoading:a,startContent:f,children:a?"Redirecting...":`Sign in with ${e}`})]})}export{p as default};
