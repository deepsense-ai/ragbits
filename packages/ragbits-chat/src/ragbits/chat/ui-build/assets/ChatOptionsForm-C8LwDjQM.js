import{u as j,g as C,a as v,h as O,b,r as y,j as t,D as S,d as a,I as _,m as D,e as F,f as E}from"./index-CMUZuguB.js";import{u as N,g as l,v as n,F as P}from"./index-mvihvNU7.js";import{m as R}from"./chunk-IGSAU2ZA-BfUeL7Ni.js";function z(){const{isOpen:c,onOpen:d,onClose:o}=j(),u=C(e=>e.chatOptions),{setChatOptions:r,initializeChatOptions:i}=v(),m=O(e=>e.currentConversation),{config:{user_settings:h}}=b(),s=h?.form,f=()=>{o()},p=e=>{r(e.formData),o()},x=()=>{if(!s)return;const e=l(n,s);r(e),o()},g=N();return y.useEffect(()=>{if(!s)return;const e=l(n,s);i(e)},[i,s,m]),s?t.jsxs(t.Fragment,{children:[t.jsx(S,{content:"Chat Options",placement:"bottom",children:t.jsx(a,{isIconOnly:!0,variant:"ghost",className:"p-0","aria-label":"Open chat options",onPress:d,"data-testid":"open-chat-options",children:t.jsx(_,{icon:"heroicons:cog-6-tooth"})})}),t.jsx(D,{isOpen:c,onOpenChange:f,children:t.jsx(F,{children:e=>t.jsxs(t.Fragment,{children:[t.jsx(R,{className:"text-default-900 flex flex-col gap-1",children:s.title||"Chat Options"}),t.jsx(E,{children:t.jsx("div",{className:"flex flex-col gap-4",children:t.jsx(P,{schema:s,validator:n,formData:u,onSubmit:p,transformErrors:g,liveValidate:!0,children:t.jsxs("div",{className:"flex justify-end gap-4 py-4",children:[t.jsx(a,{className:"mr-auto",color:"primary",variant:"light",onPress:x,"aria-label":"Restore default user settings",children:"Restore defaults"}),t.jsx(a,{color:"danger",variant:"light",onPress:e,"aria-label":"Close chat options form",children:"Cancel"}),t.jsx(a,{color:"primary",type:"submit","aria-label":"Save chat options","data-testid":"chat-options-submit",children:"Save"})]})})})})]})})})]}):null}export{z as default};
