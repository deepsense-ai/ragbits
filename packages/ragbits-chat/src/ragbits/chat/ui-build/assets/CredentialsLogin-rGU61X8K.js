import{r as c,c as x,g as w,h as b,j as s,A as S,o as j,d as v,p as P}from"./index-DpOBiJiD.js";import{a as C}from"./authStore-BJzDjplU.js";import{u as q}from"./useInitializeUserStore-gUBPelSF.js";import{i as d}from"./chunk-SSA7SXE4-CH4dnGpZ.js";function N(){const[t,m]=c.useState({username:"",password:""}),u=x("/api/auth/login",{headers:{"Content-Type":"application/json"},method:"POST"}),p=w(C,e=>e.login),g=b(),f=q(),[y,o]=c.useState(!1),h=async e=>{o(!1),e.preventDefault(),e.stopPropagation();const r=new FormData(e.currentTarget),n=r.get("username"),i=r.get("password");try{const a=await u.call({body:{username:n,password:i}});if(!a.success||!a.user){o(!0);return}p(a.user),f(a.user.user_id),g("/")}catch(a){console.error("Failed to login",a),o(!0)}},l=e=>r=>m(n=>P(n,i=>{i[e]=r.target.value}));return s.jsxs("form",{className:"flex w-full flex-col gap-4",onSubmit:h,children:[s.jsx(d,{label:"Username",name:"username",labelPlacement:"outside",placeholder:"Your username",required:!0,isRequired:!0,value:t.username,onChange:l("username")}),s.jsx(d,{label:"Password",labelPlacement:"outside",id:"password",name:"password",type:"password",placeholder:"••••••••",required:!0,isRequired:!0,value:t.password,onChange:l("password")}),s.jsx(S,{children:y&&!u.isLoading&&s.jsx(j.div,{className:"text-small text-danger",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3,ease:"easeOut"},children:"We couldn't sign you in. Please verify your credentials and try again."})}),s.jsx(v,{type:"submit",color:t.password&&t.username?"primary":"default",children:"Sign in"})]})}export{N as default};
