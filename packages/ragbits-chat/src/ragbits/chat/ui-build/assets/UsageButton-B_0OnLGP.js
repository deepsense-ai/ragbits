import{E as e,a7 as N,a8 as k,a9 as g,aa as y,ab as v,bw as w}from"./useThemeContext-DkrqKvLn.js";import{u as E,l as x,D as O}from"./main-BJLJjzL4.js";import{t as R,a as D,b as C,c as F,d as S,e as T}from"./chunk-F3UDT23P-C4MzBAmg.js";import{m as q}from"./chunk-IGSAU2ZA-CRWCDn7K.js";import"./useSelectableItem-BR0VPP-3.js";import"./index-B9NaYZAN.js";const I={n_requests:"Number Of Requests",estimated_cost:"Estimated Cost ($)"},f=["model","n_requests","prompt_tokens","completion_tokens","total_tokens","estimated_cost"];function U(a){return a.replace(/(-?)(\d*)\.?(\d*)e([+-]\d+)/,function(i,r,l,o,n){return n<0?r+"0."+Array(1-n-l.length).join("0")+o+l:r+l+o+Array(n-o.length+1).join("0")})}function M({usage:a}){const i=Object.keys(a),{isOpen:r,onOpen:l,onClose:o}=E(),n=()=>{o()},c=Object.keys(a[i[0]]),p=[...f.filter(s=>s==="model"||c.includes(s)),...c.filter(s=>!f.includes(s))],h=c.reduce((s,d)=>({...s,[d]:0}),{}),t=i.reduce((s,d)=>(p.reduce((m,u)=>(u==="model"||(m[u]+=a[d][u]),m),s),s),h),j=[...p.map(s=>({key:s,label:I[s]??x.words(s).map(x.upperFirst).join(" ")}))],_=[...i.map(s=>({model:s,...a[s]})),{model:"Total",...t}],b=e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[t.prompt_tokens!==void 0&&e.jsxs("div",{className:"flex justify-between gap-2",children:[e.jsx("span",{className:"font-semibold",children:"Prompt tokens"}),e.jsx("span",{children:t.prompt_tokens})]}),t.completion_tokens!==void 0&&e.jsxs("div",{className:"flex justify-between gap-2",children:[e.jsx("span",{className:"font-semibold",children:"Completion tokens"}),e.jsx("span",{children:t.completion_tokens})]}),t.total_tokens!==void 0&&e.jsxs("div",{className:"flex justify-between gap-2",children:[e.jsx("span",{className:"font-semibold",children:"Total tokens"}),e.jsx("span",{children:t.total_tokens})]}),t.estimated_cost!==void 0&&e.jsxs("div",{className:"flex justify-between gap-2",children:[e.jsx("span",{className:"font-semibold",children:"Estimated cost"}),e.jsxs("span",{children:[U(t.estimated_cost.toString()),"$"]})]})]}),e.jsx("p",{className:"m-auto mt-2 text-center",children:"Show detailed usage breakdown by model."})]});return e.jsxs(e.Fragment,{children:[e.jsx(O,{content:b,placement:"bottom",children:e.jsx(N,{isIconOnly:!0,variant:"ghost",className:"p-0","aria-label":"Open usage details",onPress:l,children:e.jsx(k,{icon:"heroicons:information-circle"})})}),e.jsx(g,{isOpen:r,onOpenChange:n,size:"4xl",children:e.jsx(y,{children:e.jsxs(e.Fragment,{children:[e.jsx(q,{className:"text-default-900 flex flex-col gap-1",children:"Usage details"}),e.jsx(v,{children:e.jsxs(R,{"aria-label":"Table with detailed usage statistics for each model used to generate the message.",fullWidth:!0,children:[e.jsx(D,{columns:j,children:s=>e.jsx(C,{children:s.label},s.key)}),e.jsx(F,{items:_,children:s=>e.jsx(S,{className:s.model==="Total"?"border-default-200 border-t-1":"",children:d=>e.jsx(T,{children:w(s,d)})},s.model)})]})})]})})})]})}export{M as default};
