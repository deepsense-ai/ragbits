name: Main branch checks

on:
  push:
    branches: [main]

jobs:
  shared:
    uses: ./.github/workflows/shared.yml
  push-main:
    uses: ./.github/workflows/push-main.yml
  packages:
    needs: push-main
    if: ${{ needs.main.outputs.packages-changed == 'true' }}
    uses: ./.github/workflows/packages.yml
  ui:
    needs: push-main
    if: ${{ needs.main.outputs.ui-changed == 'true' }}
    uses: ./.github/workflows/ui.yml