import{r as d,a as h,aZ as y,aV as w,j as e,aN as j,aW as b,e as v,p as S}from"./index-ARGH7eR7.js";import{a as N}from"./authStore-DKD7laAE.js";import{i as c}from"./chunk-SSA7SXE4-3ANOz71D.js";function D(){const[t,m]=d.useState({username:"",password:""}),n=h("/api/auth/login",{headers:{"Content-Type":"application/json"},method:"POST"}),p=y(N,a=>a.login),g=w(),[x,o]=d.useState(!1),f=async a=>{o(!1),a.preventDefault(),a.stopPropagation();const r=new FormData(a.currentTarget),i=r.get("username"),l=r.get("password");try{const s=await n.call({body:{username:i,password:l}});if(!s.success||!s.jwt_token||!s.user){o(!0);return}p(s.user,s.jwt_token),g("/")}catch(s){o(!0),console.error("Failed to login",s)}},u=a=>r=>m(i=>S(i,l=>{l[a]=r.target.value}));return e.jsx("div",{className:"flex h-screen w-screen",children:e.jsxs("form",{className:"rounded-medium border-small border-divider m-auto flex w-full max-w-xs flex-col gap-4 p-4",onSubmit:f,children:[e.jsxs("div",{className:"text-small",children:[e.jsx("div",{className:"text-foreground truncate leading-5 font-semibold",children:"Sign in"}),e.jsx("div",{className:"text-default-500 truncate leading-5 font-normal",children:"Sign in to start chatting."})]}),e.jsx(c,{label:"Username",name:"username",labelPlacement:"outside",placeholder:"Your username",required:!0,isRequired:!0,value:t.username,onChange:u("username")}),e.jsx(c,{label:"Password",labelPlacement:"outside",id:"password",name:"password",type:"password",placeholder:"••••••••",required:!0,isRequired:!0,value:t.password,onChange:u("password")}),e.jsx(j,{children:x&&n.error&&!n.isLoading&&e.jsx(b.div,{className:"text-small text-danger",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3,ease:"easeOut"},children:"We couldn't sign you in. Please verify your credentials and try again."})}),e.jsx(v,{type:"submit",color:t.password&&t.username?"primary":"default",children:"Sign in"})]})})}export{D as default};
