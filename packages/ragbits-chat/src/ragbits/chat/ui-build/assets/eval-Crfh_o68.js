import{l as ns,d as ls,A as Ve,B as pe,C as Q,ay as os,X as G,K as q,P as W,W as e,z as ye,ag as je,b6 as is,r as b,az as cs,V as He,N as Be,L as Ne,O as Ce,Q as z,S as I,T as me,b7 as ds,b8 as Re,am as Ue,an as us,ao as ms,G as fs,b9 as bs,F as xs,p as we,s as ze,$ as hs,J as gs,ac as ps,ba as vs,ai as ys,Y as js,Z as Ns,a1 as Cs,a6 as ws,a7 as Ss,aI as ks,aF as Ps,aH as _s,aG as $e,aO as Ge,aN as Rs,aP as M,aM as T,aC as Se,bb as qe,aL as Z,aQ as Ye,a5 as Te,aJ as De,aK as Ke,aU as $s,aV as ge,a$ as Ts,b0 as Ds,b1 as Ks,b2 as Fs,b4 as As,b5 as Ls}from"./useThemeContext-BNyuoliF.js";import{$ as Is}from"./useHasTabbableChild-C2Cv_VW_.js";import{$ as Es}from"./useSelectableItem-D2y2y8KW.js";import{d as Ms}from"./features-animation-BunFTHiu.js";import{$ as Ws}from"./useListState-CQskP0UL.js";const Os={...Ms,...ls,...ns};var Fe=Ve({slots:{base:"inline-flex",tabList:["flex","p-1","h-fit","gap-2","items-center","flex-nowrap","overflow-x-scroll","scrollbar-hide","bg-default-100"],tab:["z-0","w-full","px-3","py-1","flex","group","relative","justify-center","items-center","outline-hidden","cursor-pointer","transition-opacity","tap-highlight-transparent","data-[disabled=true]:cursor-not-allowed","data-[disabled=true]:opacity-30","data-[hover-unselected=true]:opacity-disabled",...pe],tabContent:["relative","z-10","text-inherit","whitespace-nowrap","transition-colors","text-default-500","group-data-[selected=true]:text-foreground"],cursor:["absolute","z-0","bg-white"],panel:["py-3","px-1","outline-hidden","data-[inert=true]:hidden",...pe],tabWrapper:[]},variants:{variant:{solid:{cursor:"inset-0"},light:{tabList:"bg-transparent dark:bg-transparent",cursor:"inset-0"},underlined:{tabList:"bg-transparent dark:bg-transparent",cursor:"h-[2px] w-[80%] bottom-0 shadow-[0_1px_0px_0_rgba(0,0,0,0.05)]"},bordered:{tabList:"bg-transparent dark:bg-transparent border-medium border-default-200 shadow-xs",cursor:"inset-0"}},color:{default:{},primary:{},secondary:{},success:{},warning:{},danger:{}},size:{sm:{tabList:"rounded-medium",tab:"h-7 text-tiny rounded-small",cursor:"rounded-small"},md:{tabList:"rounded-medium",tab:"h-8 text-small rounded-small",cursor:"rounded-small"},lg:{tabList:"rounded-large",tab:"h-9 text-medium rounded-medium",cursor:"rounded-medium"}},radius:{none:{tabList:"rounded-none",tab:"rounded-none",cursor:"rounded-none"},sm:{tabList:"rounded-medium",tab:"rounded-small",cursor:"rounded-small"},md:{tabList:"rounded-medium",tab:"rounded-small",cursor:"rounded-small"},lg:{tabList:"rounded-large",tab:"rounded-medium",cursor:"rounded-medium"},full:{tabList:"rounded-full",tab:"rounded-full",cursor:"rounded-full"}},fullWidth:{true:{base:"w-full",tabList:"w-full"}},isDisabled:{true:{tabList:"opacity-disabled pointer-events-none"}},disableAnimation:{true:{tab:"transition-none",tabContent:"transition-none"}},placement:{top:{},start:{tabList:"flex-col",panel:"py-0 px-3",tabWrapper:"flex"},end:{tabList:"flex-col",panel:"py-0 px-3",tabWrapper:"flex flex-row-reverse"},bottom:{tabWrapper:"flex flex-col-reverse"}}},defaultVariants:{color:"default",variant:"solid",size:"md",fullWidth:!1,isDisabled:!1},compoundVariants:[{variant:["solid","bordered","light"],color:"default",class:{cursor:["bg-background","dark:bg-default","shadow-small"],tabContent:"group-data-[selected=true]:text-default-foreground"}},{variant:["solid","bordered","light"],color:"primary",class:{cursor:Q.solid.primary,tabContent:"group-data-[selected=true]:text-primary-foreground"}},{variant:["solid","bordered","light"],color:"secondary",class:{cursor:Q.solid.secondary,tabContent:"group-data-[selected=true]:text-secondary-foreground"}},{variant:["solid","bordered","light"],color:"success",class:{cursor:Q.solid.success,tabContent:"group-data-[selected=true]:text-success-foreground"}},{variant:["solid","bordered","light"],color:"warning",class:{cursor:Q.solid.warning,tabContent:"group-data-[selected=true]:text-warning-foreground"}},{variant:["solid","bordered","light"],color:"danger",class:{cursor:Q.solid.danger,tabContent:"group-data-[selected=true]:text-danger-foreground"}},{variant:"underlined",color:"default",class:{cursor:"bg-foreground",tabContent:"group-data-[selected=true]:text-foreground"}},{variant:"underlined",color:"primary",class:{cursor:"bg-primary",tabContent:"group-data-[selected=true]:text-primary"}},{variant:"underlined",color:"secondary",class:{cursor:"bg-secondary",tabContent:"group-data-[selected=true]:text-secondary"}},{variant:"underlined",color:"success",class:{cursor:"bg-success",tabContent:"group-data-[selected=true]:text-success"}},{variant:"underlined",color:"warning",class:{cursor:"bg-warning",tabContent:"group-data-[selected=true]:text-warning"}},{variant:"underlined",color:"danger",class:{cursor:"bg-danger",tabContent:"group-data-[selected=true]:text-danger"}},{disableAnimation:!0,variant:"underlined",class:{tab:["after:content-['']","after:absolute","after:bottom-0","after:h-[2px]","after:w-[80%]","after:opacity-0","after:shadow-[0_1px_0px_0_rgba(0,0,0,0.05)]","data-[selected=true]:after:opacity-100"]}},{disableAnimation:!0,color:"default",variant:["solid","bordered","light"],class:{tab:"data-[selected=true]:bg-default data-[selected=true]:text-default-foreground"}},{disableAnimation:!0,color:"primary",variant:["solid","bordered","light"],class:{tab:"data-[selected=true]:bg-primary data-[selected=true]:text-primary-foreground"}},{disableAnimation:!0,color:"secondary",variant:["solid","bordered","light"],class:{tab:"data-[selected=true]:bg-secondary data-[selected=true]:text-secondary-foreground"}},{disableAnimation:!0,color:"success",variant:["solid","bordered","light"],class:{tab:"data-[selected=true]:bg-success data-[selected=true]:text-success-foreground"}},{disableAnimation:!0,color:"warning",variant:["solid","bordered","light"],class:{tab:"data-[selected=true]:bg-warning data-[selected=true]:text-warning-foreground"}},{disableAnimation:!0,color:"danger",variant:["solid","bordered","light"],class:{tab:"data-[selected=true]:bg-danger data-[selected=true]:text-danger-foreground"}},{disableAnimation:!0,color:"default",variant:"underlined",class:{tab:"data-[selected=true]:after:bg-foreground"}},{disableAnimation:!0,color:"primary",variant:"underlined",class:{tab:"data-[selected=true]:after:bg-primary"}},{disableAnimation:!0,color:"secondary",variant:"underlined",class:{tab:"data-[selected=true]:after:bg-secondary"}},{disableAnimation:!0,color:"success",variant:"underlined",class:{tab:"data-[selected=true]:after:bg-success"}},{disableAnimation:!0,color:"warning",variant:"underlined",class:{tab:"data-[selected=true]:after:bg-warning"}},{disableAnimation:!0,color:"danger",variant:"underlined",class:{tab:"data-[selected=true]:after:bg-danger"}}],compoundSlots:[{variant:"underlined",slots:["tab","tabList","cursor"],class:["rounded-none"]}]}),Ae=Ve({slots:{base:["flex","flex-col","relative","overflow-hidden","h-auto","outline-hidden","text-foreground","box-border","bg-content1",...pe],header:["flex","p-3","z-10","w-full","justify-start","items-center","shrink-0","overflow-inherit","color-inherit","subpixel-antialiased"],body:["relative","flex","flex-1","w-full","p-3","flex-auto","flex-col","place-content-inherit","align-items-inherit","h-auto","break-words","text-left","overflow-y-auto","subpixel-antialiased"],footer:["p-3","h-auto","flex","w-full","items-center","overflow-hidden","color-inherit","subpixel-antialiased"]},variants:{shadow:{none:{base:"shadow-none"},sm:{base:"shadow-small"},md:{base:"shadow-medium"},lg:{base:"shadow-large"}},radius:{none:{base:"rounded-none",header:"rounded-none",footer:"rounded-none"},sm:{base:"rounded-small",header:"rounded-t-small",footer:"rounded-b-small"},md:{base:"rounded-medium",header:"rounded-t-medium",footer:"rounded-b-medium"},lg:{base:"rounded-large",header:"rounded-t-large",footer:"rounded-b-large"}},fullWidth:{true:{base:"w-full"}},isHoverable:{true:{base:"data-[hover=true]:bg-content2 dark:data-[hover=true]:bg-content2"}},isPressable:{true:{base:"cursor-pointer"}},isBlurred:{true:{base:["bg-background/80","dark:bg-background/20","backdrop-blur-md","backdrop-saturate-150"]}},isFooterBlurred:{true:{footer:["bg-background/10","backdrop-blur","backdrop-saturate-150"]}},isDisabled:{true:{base:"opacity-disabled cursor-not-allowed"}},disableAnimation:{true:"",false:{base:"transition-transform-background motion-reduce:transition-none"}}},compoundVariants:[{isPressable:!0,class:"data-[pressed=true]:scale-[0.97] tap-highlight-transparent"}],defaultVariants:{radius:"lg",shadow:"md",fullWidth:!1,isHoverable:!1,isPressable:!1,isDisabled:!1,isFooterBlurred:!1}}),[Vs,Je]=os({name:"CardContext",strict:!0,errorMessage:"useCardContext: `context` is undefined. Seems you forgot to wrap component within <Card />"}),Xe=G((t,a)=>{var s;const{as:r,className:n,children:o,...c}=t,l=r||"div",i=q(a),{slots:u,classNames:m}=Je(),g=W(m?.body,n);return e.jsx(l,{ref:i,className:(s=u.body)==null?void 0:s.call(u,{class:g}),...c,children:o})});Xe.displayName="HeroUI.CardBody";var ee=Xe,Qe=G((t,a)=>{var s;const{as:r,className:n,children:o,...c}=t,l=r||"div",i=q(a),{slots:u,classNames:m}=Je(),g=W(m?.header,n);return e.jsx(l,{ref:i,className:(s=u.header)==null?void 0:s.call(u,{class:g}),...c,children:o})});Qe.displayName="HeroUI.CardHeader";var Hs=Qe;function Bs(t){var a,s,r,n;const o=ye(),[c,l]=je(t,Ae.variantKeys),{ref:i,as:u,children:m,onClick:g,onPress:C,autoFocus:v,className:f,classNames:x,allowTextSelectionOnPress:d=!0,...h}=c,p=q(i),y=u||(t.isPressable?"button":"div"),S=typeof y=="string",j=(s=(a=t.disableAnimation)!=null?a:o?.disableAnimation)!=null?s:!1,k=(n=(r=t.disableRipple)!=null?r:o?.disableRipple)!=null?n:!1,_=W(x?.base,f),{onClear:w,onPress:F,ripples:E}=is(),A=b.useCallback(H=>{k||j||p.current&&F(H)},[k,j,p,F]),{buttonProps:L,isPressed:R}=cs({onPress:He(C,A),elementType:u,isDisabled:!t.isPressable,onClick:g,allowTextSelectionOnPress:d,...h},p),{hoverProps:$,isHovered:P}=Be({isDisabled:!t.isHoverable,...h}),{isFocusVisible:D,isFocused:N,focusProps:O}=Ne({autoFocus:v}),V=b.useMemo(()=>Ae({...l,disableAnimation:j}),[Ce(l),j]),Y=b.useMemo(()=>({slots:V,classNames:x,disableAnimation:j,isDisabled:t.isDisabled,isFooterBlurred:t.isFooterBlurred,fullWidth:t.fullWidth}),[V,x,t.isDisabled,t.isFooterBlurred,j,t.fullWidth]),J=b.useCallback((H={})=>({ref:p,className:V.base({class:_}),tabIndex:t.isPressable?0:-1,"data-hover":I(P),"data-pressed":I(R),"data-focus":I(N),"data-focus-visible":I(D),"data-disabled":I(t.isDisabled),...z(t.isPressable?{...L,...O,role:"button"}:{},t.isHoverable?$:{},me(h,{enabled:S}),me(H))}),[p,V,_,S,t.isPressable,t.isHoverable,t.isDisabled,P,R,D,L,O,$,h]),X=b.useCallback(()=>({ripples:E,onClear:w}),[E,w]);return{context:Y,domRef:p,Component:y,classNames:x,children:m,isHovered:P,isPressed:R,disableAnimation:j,isPressable:t.isPressable,isHoverable:t.isHoverable,disableRipple:k,handlePress:A,isFocusVisible:D,getCardProps:J,getRippleProps:X}}var Ze=G((t,a)=>{const{children:s,context:r,Component:n,isPressable:o,disableAnimation:c,disableRipple:l,getCardProps:i,getRippleProps:u}=Bs({...t,ref:a});return e.jsxs(n,{...i(),children:[e.jsx(Vs,{value:r,children:s}),o&&!c&&!l&&e.jsx(ds,{...u()})]})});Ze.displayName="HeroUI.Card";var se=Ze;const Le=t=>typeof t=="object"&&t!=null&&t.nodeType===1,Ie=(t,a)=>(!a||t!=="hidden")&&t!=="visible"&&t!=="clip",de=(t,a)=>{if(t.clientHeight<t.scrollHeight||t.clientWidth<t.scrollWidth){const s=getComputedStyle(t,null);return Ie(s.overflowY,a)||Ie(s.overflowX,a)||(r=>{const n=(o=>{if(!o.ownerDocument||!o.ownerDocument.defaultView)return null;try{return o.ownerDocument.defaultView.frameElement}catch{return null}})(r);return!!n&&(n.clientHeight<r.scrollHeight||n.clientWidth<r.scrollWidth)})(t)}return!1},ue=(t,a,s,r,n,o,c,l)=>o<t&&c>a||o>t&&c<a?0:o<=t&&l<=s||c>=a&&l>=s?o-t-r:c>a&&l<s||o<t&&l>s?c-a+n:0,Us=t=>{const a=t.parentElement;return a??(t.getRootNode().host||null)},Ee=(t,a)=>{var s,r,n,o;if(typeof document>"u")return[];const{scrollMode:c,block:l,inline:i,boundary:u,skipOverflowHiddenElements:m}=a,g=typeof u=="function"?u:D=>D!==u;if(!Le(t))throw new TypeError("Invalid target");const C=document.scrollingElement||document.documentElement,v=[];let f=t;for(;Le(f)&&g(f);){if(f=Us(f),f===C){v.push(f);break}f!=null&&f===document.body&&de(f)&&!de(document.documentElement)||f!=null&&de(f,m)&&v.push(f)}const x=(r=(s=window.visualViewport)==null?void 0:s.width)!=null?r:innerWidth,d=(o=(n=window.visualViewport)==null?void 0:n.height)!=null?o:innerHeight,{scrollX:h,scrollY:p}=window,{height:y,width:S,top:j,right:k,bottom:_,left:w}=t.getBoundingClientRect(),{top:F,right:E,bottom:A,left:L}=(D=>{const N=window.getComputedStyle(D);return{top:parseFloat(N.scrollMarginTop)||0,right:parseFloat(N.scrollMarginRight)||0,bottom:parseFloat(N.scrollMarginBottom)||0,left:parseFloat(N.scrollMarginLeft)||0}})(t);let R=l==="start"||l==="nearest"?j-F:l==="end"?_+A:j+y/2-F+A,$=i==="center"?w+S/2-L+E:i==="end"?k+E:w-L;const P=[];for(let D=0;D<v.length;D++){const N=v[D],{height:O,width:V,top:Y,right:J,bottom:X,left:H}=N.getBoundingClientRect();if(c==="if-needed"&&j>=0&&w>=0&&_<=d&&k<=x&&(N===C&&!de(N)||j>=Y&&_<=X&&w>=H&&k<=J))return P;const ae=getComputedStyle(N),re=parseInt(ae.borderLeftWidth,10),ne=parseInt(ae.borderTopWidth,10),le=parseInt(ae.borderRightWidth,10),oe=parseInt(ae.borderBottomWidth,10);let B=0,U=0;const ie="offsetWidth"in N?N.offsetWidth-N.clientWidth-re-le:0,ce="offsetHeight"in N?N.offsetHeight-N.clientHeight-ne-oe:0,xe="offsetWidth"in N?N.offsetWidth===0?0:V/N.offsetWidth:0,he="offsetHeight"in N?N.offsetHeight===0?0:O/N.offsetHeight:0;if(C===N)B=l==="start"?R:l==="end"?R-d:l==="nearest"?ue(p,p+d,d,ne,oe,p+R,p+R+y,y):R-d/2,U=i==="start"?$:i==="center"?$-x/2:i==="end"?$-x:ue(h,h+x,x,re,le,h+$,h+$+S,S),B=Math.max(0,B+p),U=Math.max(0,U+h);else{B=l==="start"?R-Y-ne:l==="end"?R-X+oe+ce:l==="nearest"?ue(Y,X,O,ne,oe+ce,R,R+y,y):R-(Y+O/2)+ce/2,U=i==="start"?$-H-re:i==="center"?$-(H+V/2)+ie/2:i==="end"?$-J+le+ie:ue(H,J,V,re,le+ie,$,$+S,S);const{scrollLeft:Pe,scrollTop:_e}=N;B=he===0?0:Math.max(0,Math.min(_e+B/he,N.scrollHeight-O/he+ce)),U=xe===0?0:Math.max(0,Math.min(Pe+U/xe,N.scrollWidth-V/xe+ie)),R+=_e-B,$+=Pe-U}P.push({el:N,top:B,left:U})}return P},zs=t=>t===!1?{block:"end",inline:"nearest"}:(a=>a===Object(a)&&Object.keys(a).length!==0)(t)?t:{block:"start",inline:"nearest"};function Gs(t,a){if(!t.isConnected||!(r=>{let n=r;for(;n&&n.parentNode;){if(n.parentNode===document)return!0;n=n.parentNode instanceof ShadowRoot?n.parentNode.host:n.parentNode}return!1})(t))return;if((r=>typeof r=="object"&&typeof r.behavior=="function")(a))return a.behavior(Ee(t,a));const s=typeof a=="boolean"||a==null?void 0:a.behavior;for(const{el:r,top:n,left:o}of Ee(t,zs(a)))r.scroll({top:n,left:o,behavior:s})}function qs(t){var a,s;const r=ye(),[n,o]=je(t,Re.variantKeys),{ref:c,as:l,id:i,className:u,classNames:m,label:g,valueLabel:C,value:v=0,minValue:f=0,maxValue:x=100,showValueLabel:d=!1,formatOptions:h={style:"percent"},...p}=n,y=l||"div",S=q(c),j=W(m?.base,u),[,k]=Ue({rerender:!0,delay:100}),_=t.isIndeterminate,w=(s=(a=t.disableAnimation)!=null?a:r?.disableAnimation)!=null?s:!1,{progressBarProps:F,labelProps:E}=us({id:i,label:g,value:v,minValue:f,maxValue:x,valueLabel:C,formatOptions:h,isIndeterminate:_,"aria-labelledby":t["aria-labelledby"],"aria-label":t["aria-label"]}),A=b.useMemo(()=>Re({...o,disableAnimation:w}),[Ce(o),w]),L=w?!0:k,R=b.useMemo(()=>_||!L?void 0:ms((v-f)/(x-f)*100),[L,_,v,f,x]),$=b.useCallback((D={})=>({ref:S,"data-indeterminate":I(_),"data-disabled":I(t.isDisabled),className:A.base({class:j}),...z(F,p,D)}),[S,A,_,t.isDisabled,j,F,p]),P=b.useCallback((D={})=>({className:A.label({class:m?.label}),...z(E,D)}),[A,m,E]);return{Component:y,domRef:S,slots:A,classNames:m,label:g,percentage:R,showValueLabel:d,getProgressBarProps:$,getLabelProps:P}}var es=G((t,a)=>{const{Component:s,slots:r,classNames:n,label:o,percentage:c,showValueLabel:l,getProgressBarProps:i,getLabelProps:u}=qs({...t,ref:a}),m=i(),g=o||l;return e.jsxs(s,{...m,children:[g?e.jsxs("div",{className:r.labelWrapper({class:n?.labelWrapper}),children:[o&&e.jsx("span",{...u(),children:o}),l&&e.jsx("span",{className:r.value({class:n?.value}),children:m["aria-valuetext"]})]}):null,e.jsx("div",{className:r.track({class:n?.track}),children:e.jsx("div",{className:r.indicator({class:n?.indicator}),style:{transform:`translateX(-${100-(c||0)}%)`}})})]})});es.displayName="HeroUI.Progress";var ss=es;const ts=new WeakMap;function fe(t,a,s){return t?(typeof a=="string"&&(a=a.replace(/\s+/g,"")),`${ts.get(t)}-${s}-${a}`):""}function Ys(t,a,s){let{key:r,isDisabled:n,shouldSelectOnPressUp:o}=t,{selectionManager:c,selectedKey:l}=a,i=r===l,u=n||a.isDisabled||a.selectionManager.isDisabled(r),{itemProps:m,isPressed:g}=Es({selectionManager:c,key:r,ref:s,isDisabled:u,shouldSelectOnPressUp:o,linkBehavior:"selection"}),C=fe(a,r,"tab"),v=fe(a,r,"tabpanel"),{tabIndex:f}=m,x=a.collection.getItem(r),d=fs(x?.props,{labelable:!0});delete d.id;let h=bs(x?.props),{focusableProps:p}=xs({isDisabled:u},s);return{tabProps:we(d,p,h,m,{id:C,"aria-selected":i,"aria-disabled":u||void 0,"aria-controls":i?v:void 0,tabIndex:u?void 0:f,role:"tab"}),isSelected:i,isDisabled:u,isPressed:g}}function Js(t,a,s){let r=Is(s)?void 0:0;var n;const o=fe(a,(n=t.id)!==null&&n!==void 0?n:a?.selectedKey,"tabpanel"),c=ze({...t,id:o,"aria-labelledby":fe(a,a?.selectedKey,"tab")});return{tabPanelProps:we(c,{tabIndex:r,role:"tabpanel","aria-describedby":t["aria-describedby"],"aria-details":t["aria-details"]})}}class Xs{getKeyLeftOf(a){return this.flipDirection?this.getNextKey(a):this.getPreviousKey(a)}getKeyRightOf(a){return this.flipDirection?this.getPreviousKey(a):this.getNextKey(a)}isDisabled(a){var s,r;return this.disabledKeys.has(a)||!!(!((r=this.collection.getItem(a))===null||r===void 0||(s=r.props)===null||s===void 0)&&s.isDisabled)}getFirstKey(){let a=this.collection.getFirstKey();return a!=null&&this.isDisabled(a)&&(a=this.getNextKey(a)),a}getLastKey(){let a=this.collection.getLastKey();return a!=null&&this.isDisabled(a)&&(a=this.getPreviousKey(a)),a}getKeyAbove(a){return this.tabDirection?null:this.getPreviousKey(a)}getKeyBelow(a){return this.tabDirection?null:this.getNextKey(a)}getNextKey(a){let s=a;do s=this.collection.getKeyAfter(s),s==null&&(s=this.collection.getFirstKey());while(s!=null&&this.isDisabled(s));return s}getPreviousKey(a){let s=a;do s=this.collection.getKeyBefore(s),s==null&&(s=this.collection.getLastKey());while(s!=null&&this.isDisabled(s));return s}constructor(a,s,r,n=new Set){this.collection=a,this.flipDirection=s==="rtl"&&r==="horizontal",this.disabledKeys=n,this.tabDirection=r==="horizontal"}}function Qs(t,a,s){let{orientation:r="horizontal",keyboardActivation:n="automatic"}=t,{collection:o,selectionManager:c,disabledKeys:l}=a,{direction:i}=hs(),u=b.useMemo(()=>new Xs(o,i,r,l),[o,l,r,i]),{collectionProps:m}=gs({ref:s,selectionManager:c,keyboardDelegate:u,selectOnFocus:n==="automatic",disallowEmptySelection:!0,scrollRef:s,linkBehavior:"selection"}),g=ps();ts.set(a,g);let C=ze({...t,id:g});return{tabListProps:{...we(m,C),role:"tablist","aria-orientation":r,tabIndex:void 0}}}var as=G((t,a)=>{var s,r;const{as:n,tabKey:o,destroyInactiveTabPanel:c,state:l,className:i,slots:u,classNames:m,...g}=t,C=n||"div",v=q(a),{tabPanelProps:f}=Js({...t,id:String(o)},l,v),{focusProps:x,isFocused:d,isFocusVisible:h}=Ne(),p=l.selectedItem,y=l.collection.getItem(o).props.children,S=W(m?.panel,i,(s=p?.props)==null?void 0:s.className),j=o===p?.key;return!y||!j&&c?null:e.jsx(C,{ref:v,"data-focus":d,"data-focus-visible":h,"data-inert":j?void 0:"true",inert:vs(!j),...j&&z(f,x,g),className:(r=u.panel)==null?void 0:r.call(u,{class:S}),"data-slot":"panel",children:y})});as.displayName="HeroUI.TabPanel";var Zs=as,rs=G((t,a)=>{var s;const{className:r,as:n,item:o,state:c,classNames:l,isDisabled:i,listRef:u,slots:m,motionProps:g,disableAnimation:C,disableCursorAnimation:v,shouldSelectOnPressUp:f,onClick:x,tabRef:d,...h}=t,{key:p}=o,y=q(a),S=n||(t.href?"a":"button"),j=typeof S=="string",{tabProps:k,isSelected:_,isDisabled:w,isPressed:F}=Ys({key:p,isDisabled:i,shouldSelectOnPressUp:f},c,y);t.children==null&&delete k["aria-controls"];const E=i||w,{focusProps:A,isFocused:L,isFocusVisible:R}=Ne(),{hoverProps:$,isHovered:P}=Be({isDisabled:E}),D=W(l?.tab,r),[,N]=Ue({rerender:!0}),O=()=>{!y?.current||!u?.current||Gs(y.current,{scrollMode:"if-needed",behavior:"smooth",block:"end",inline:"end",boundary:u?.current})};return e.jsxs(S,{ref:ys(y,d),"data-disabled":I(w),"data-focus":I(L),"data-focus-visible":I(R),"data-hover":I(P),"data-hover-unselected":I((P||F)&&!_),"data-pressed":I(F),"data-selected":I(_),"data-slot":"tab",...z(k,E?{}:{...A,...$},me(h,{enabled:j,omitPropNames:new Set(["title"])}),{onClick:He(O,x,k.onClick)}),className:(s=m.tab)==null?void 0:s.call(m,{class:D}),title:h?.titleValue,type:S==="button"?"button":void 0,children:[_&&!C&&!v&&N?e.jsx(js,{features:Os,children:e.jsx(Ns.span,{className:m.cursor({class:l?.cursor}),"data-slot":"cursor",layoutDependency:!1,layoutId:"cursor",transition:{type:"spring",bounce:.15,duration:.5},...g})}):null,e.jsx("div",{className:m.tabContent({class:l?.tabContent}),"data-slot":"tabContent",children:o.rendered})]})});rs.displayName="HeroUI.Tab";var et=rs;function st(t){var a;let[s,r]=Cs(t.selectedKey,(a=t.defaultSelectedKey)!==null&&a!==void 0?a:null,t.onSelectionChange),n=b.useMemo(()=>s!=null?[s]:[],[s]),{collection:o,disabledKeys:c,selectionManager:l}=Ws({...t,selectionMode:"single",disallowEmptySelection:!0,allowDuplicateSelectionEvents:!0,selectedKeys:n,onSelectionChange:u=>{if(u==="all")return;var m;let g=(m=u.values().next().value)!==null&&m!==void 0?m:null;g===s&&t.onSelectionChange&&t.onSelectionChange(g),r(g)}}),i=s!=null?o.getItem(s):null;return{collection:o,disabledKeys:c,selectionManager:l,selectedKey:s,setSelectedKey:r,selectedItem:i}}function tt(t){var a,s;let r=st({...t,onSelectionChange:t.onSelectionChange?i=>{var u;i!=null&&((u=t.onSelectionChange)===null||u===void 0||u.call(t,i))}:void 0,suppressTextValueWarning:!0,defaultSelectedKey:(s=(a=t.defaultSelectedKey)!==null&&a!==void 0?a:Me(t.collection,t.disabledKeys?new Set(t.disabledKeys):new Set))!==null&&s!==void 0?s:void 0}),{selectionManager:n,collection:o,selectedKey:c}=r,l=b.useRef(c);return b.useEffect(()=>{let i=c;t.selectedKey==null&&(n.isEmpty||i==null||!o.getItem(i))&&(i=Me(o,r.disabledKeys),i!=null&&n.setSelectedKeys([i])),(i!=null&&n.focusedKey==null||!n.isFocused&&i!==l.current)&&n.setFocusedKey(i),l.current=i}),{...r,isDisabled:t.isDisabled||!1}}function Me(t,a){let s=null;if(t){var r,n,o,c;for(s=t.getFirstKey();s!=null&&(a.has(s)||!((n=t.getItem(s))===null||n===void 0||(r=n.props)===null||r===void 0)&&r.isDisabled)&&s!==t.getLastKey();)s=t.getKeyAfter(s);s!=null&&(a.has(s)||!((c=t.getItem(s))===null||c===void 0||(o=c.props)===null||o===void 0)&&o.isDisabled)&&s===t.getLastKey()&&(s=t.getFirstKey())}return s}function at(t){var a,s,r;const n=ye(),[o,c]=je(t,Fe.variantKeys),{ref:l,as:i,className:u,classNames:m,children:g,disableCursorAnimation:C,motionProps:v,isVertical:f=!1,shouldSelectOnPressUp:x=!0,destroyInactiveTabPanel:d=!0,...h}=o,p=i||"div",y=typeof p=="string",S=q(l),j=(s=(a=t?.disableAnimation)!=null?a:n?.disableAnimation)!=null?s:!1,k=tt({children:g,...h}),{tabListProps:_}=Qs(h,k,S),w=b.useMemo(()=>Fe({...c,disableAnimation:j,...f?{placement:"start"}:{}}),[Ce(c),j,f]),F=W(m?.base,u),E=b.useMemo(()=>({state:k,slots:w,classNames:m,motionProps:v,disableAnimation:j,listRef:S,shouldSelectOnPressUp:x,disableCursorAnimation:C,isDisabled:t?.isDisabled}),[k,w,S,v,j,C,x,t?.isDisabled,m]),A=b.useCallback(P=>({"data-slot":"base",className:w.base({class:W(F,P?.className)}),...z(me(h,{enabled:y}),P)}),[F,h,w]),L=(r=c.placement)!=null?r:f?"start":"top",R=b.useCallback(P=>({"data-slot":"tabWrapper",className:w.tabWrapper({class:W(m?.tabWrapper,P?.className)}),"data-placement":L,"data-vertical":f||L==="start"||L==="end"?"vertical":"horizontal"}),[m,w,L,f]),$=b.useCallback(P=>({ref:S,"data-slot":"tabList",className:w.tabList({class:W(m?.tabList,P?.className)}),...z(_,P)}),[S,_,m,w]);return{Component:p,domRef:S,state:k,values:E,destroyInactiveTabPanel:d,getBaseProps:A,getTabListProps:$,getWrapperProps:R}}var rt=G(function(a,s){const{Component:r,values:n,state:o,destroyInactiveTabPanel:c,getBaseProps:l,getTabListProps:i,getWrapperProps:u}=at({...a,ref:s}),m=b.useId(),g=!a.disableAnimation&&!a.disableCursorAnimation,C={state:o,listRef:n.listRef,slots:n.slots,classNames:n.classNames,isDisabled:n.isDisabled,motionProps:n.motionProps,disableAnimation:n.disableAnimation,shouldSelectOnPressUp:n.shouldSelectOnPressUp,disableCursorAnimation:n.disableCursorAnimation},v=[...o.collection].map(x=>e.jsx(et,{item:x,...C,...x.props},x.key)),f=e.jsxs(e.Fragment,{children:[e.jsx("div",{...l(),children:e.jsx(r,{...i(),children:g?e.jsx(ws,{id:m,children:v}):v})}),[...o.collection].map(x=>e.jsx(Zs,{classNames:n.classNames,destroyInactiveTabPanel:c,slots:n.slots,state:n.state,tabKey:x.key},x.key))]});return"placement"in a||"isVertical"in a?e.jsx("div",{...u(),children:f}):f}),nt=rt,lt=Ss,We=lt;const be=t=>t.toLowerCase().startsWith("personality"),ot={max_turns_scenario:15,max_turns_task:4,sim_user_model_name:null,checker_model_name:null,default_model:"gpt-4o-mini"},it=()=>ks()(Ps((t,a)=>({config:null,isConfigLoading:!1,configError:null,scenarios:{},selectedScenarioName:null,selectedForRun:[],executions:{},currentRunId:null,isExecuting:!1,simulationConfig:ot,results:[],selectedResult:null,isResultsLoading:!1,viewMode:"summary",actions:{setConfig:s=>{t(r=>{r.config=s,r.isConfigLoading=!1,r.configError=null})},setConfigLoading:s=>{t(r=>{r.isConfigLoading=s})},setConfigError:s=>{t(r=>{r.configError=s,r.isConfigLoading=!1})},setScenario:(s,r)=>{t(n=>{n.scenarios[s]=r})},selectScenario:s=>{t(r=>{r.selectedScenarioName=s})},updateScenarioTask:(s,r,n)=>{t(o=>{const c=o.scenarios[s];c&&c.tasks[r]&&Object.assign(c.tasks[r],n)})},toggleScenarioForRun:s=>{t(r=>{const n=r.selectedForRun.indexOf(s);n===-1?r.selectedForRun.push(s):r.selectedForRun.splice(n,1)})},selectAllScenariosForRun:()=>{t(s=>{s.config&&(s.selectedForRun=s.config.available_scenarios.map(r=>r.name).filter(r=>!be(r)))})},clearScenariosForRun:()=>{t(s=>{s.selectedForRun=[]})},startExecution:(s,r)=>{t(n=>{n.currentRunId=s,n.isExecuting=!0;for(const o of r)n.executions[o]={scenarioName:o,status:"queued",startTime:Date.now(),currentTurn:0,currentTaskIndex:0,currentTask:null,turns:[],error:null}})},handleProgressUpdate:s=>{t(r=>{const n=r.executions[s.scenario_name];if(n)switch(s.type){case"status":n.status=s.status,n.currentTurn=s.current_turn??0,n.currentTaskIndex=s.current_task_index??0,n.currentTask=s.current_task??null;break;case"turn":{const l={turn_index:s.turn_index,task_index:s.task_index,user_message:s.user_message,assistant_message:s.assistant_message,tool_calls:s.tool_calls,task_completed:s.task_completed,task_completed_reason:s.task_completed_reason};n.turns.push(l),n.currentTurn=s.turn_index,n.currentTaskIndex=s.task_index;break}case"task_complete":break;case"complete":n.status=s.status,Object.values(r.executions).every(l=>l.status==="completed"||l.status==="failed"||l.status==="timeout")&&(r.isExecuting=!1);break;case"error":n.status="failed",n.error=s.error,Object.values(r.executions).every(l=>l.status==="completed"||l.status==="failed"||l.status==="timeout")&&(r.isExecuting=!1);break}})},stopExecution:()=>{t(s=>{s.isExecuting=!1;for(const r of Object.values(s.executions))(r.status==="running"||r.status==="queued")&&(r.status="failed",r.error="Stopped by user")})},clearExecutions:()=>{t(s=>{s.executions={},s.currentRunId=null,s.isExecuting=!1})},setSimulationConfig:s=>{t(r=>{Object.assign(r.simulationConfig,s)})},setResults:s=>{t(r=>{r.results=s,r.isResultsLoading=!1})},setSelectedResult:s=>{t(r=>{r.selectedResult=s})},setResultsLoading:s=>{t(r=>{r.isResultsLoading=s})},addResult:s=>{t(r=>{r.results.unshift(s)})},setViewMode:s=>{t(r=>{r.viewMode=s})}}}))),ve=t=>{const a=Object.values(t.executions),s=a.length,r=a.filter(l=>l.status==="completed").length,n=a.filter(l=>l.status==="failed"||l.status==="timeout").length,o=a.filter(l=>l.status==="running"||l.status==="queued").length,c=s>0?(r+n)/s*100:0;return{total:s,completed:r,failed:n,running:o,percentage:c}},ke=b.createContext(null);function ct({children:t}){const a=b.useRef(null);return a.current||(a.current=it()),e.jsx(ke.Provider,{value:a.current,children:t})}function K(t){const a=b.useContext(ke);if(!a)throw new Error("useEvalStore must be used within EvalStoreProvider");return _s(a,t)}function te(){const t=b.useContext(ke);if(!t)throw new Error("useEvalStoreApi must be used within EvalStoreProvider");return t}const dt={idle:{color:"default",icon:"heroicons:minus",label:"Idle"},queued:{color:"primary",icon:"heroicons:clock",label:"Queued"},running:{color:"primary",icon:"heroicons:arrow-path",label:"Running"},completed:{color:"success",icon:"heroicons:check",label:"Completed"},failed:{color:"danger",icon:"heroicons:x-mark",label:"Failed"},timeout:{color:"warning",icon:"heroicons:clock",label:"Timeout"}};function Oe({name:t,scenario:a,execution:s,isSelected:r,isSelectedForRun:n,onSelect:o,onToggleForRun:c,isRunnable:l=!0}){const i=s?.status??"idle",u=dt[i];return e.jsx(se,{isPressable:!0,onPress:o,className:$e("transition-all",r&&"ring-2 ring-primary",n&&"bg-primary-50 dark:bg-primary-900/20"),children:e.jsxs(ee,{className:"gap-2 p-3",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[l&&e.jsx(Ge,{size:"sm",isSelected:n,onValueChange:()=>c?.(),onClick:m=>m.stopPropagation(),className:"mt-0.5"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-medium text-foreground truncate",children:t}),a?e.jsxs("p",{className:"text-xs text-foreground-500",children:[a.tasks.length," task",a.tasks.length!==1?"s":""]}):e.jsx(Rs,{className:"h-3 w-16 rounded mt-1"})]}),e.jsx(M,{size:"sm",color:u.color,variant:"flat",startContent:e.jsx(T,{icon:u.icon,className:$e("text-sm",i==="running"&&"animate-spin")}),children:u.label})]}),s&&i==="running"&&e.jsxs("div",{className:"mt-1",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs text-foreground-500",children:[e.jsxs("span",{children:["Turn ",s.currentTurn]}),e.jsxs("span",{children:["Task ",s.currentTaskIndex+1]})]}),s.currentTask&&e.jsx("p",{className:"text-xs text-foreground-400 truncate mt-1",children:s.currentTask})]}),s&&i==="failed"&&s.error&&e.jsx("p",{className:"text-xs text-danger mt-1 line-clamp-2",children:s.error}),s&&i==="completed"&&e.jsxs("div",{className:"flex items-center gap-2 text-xs text-foreground-500 mt-1",children:[e.jsxs("span",{children:[s.turns.length," turns"]}),e.jsx("span",{children:"|"}),e.jsxs("span",{children:[s.turns.filter(m=>m.task_completed).length," tasks done"]})]})]})})}function ut(){const{client:t}=Se(),a=te(),s=K(d=>d.config),r=K(d=>d.scenarios),n=K(d=>d.selectedScenarioName),o=K(d=>d.selectedForRun),c=K(d=>d.executions),l=b.useRef(!1),i=b.useCallback(d=>{a.getState().actions.selectScenario(d)},[a]),u=b.useCallback(d=>{a.getState().actions.toggleScenarioForRun(d)},[a]),m=b.useCallback(()=>{a.getState().actions.selectAllScenariosForRun()},[a]),g=b.useCallback(()=>{a.getState().actions.clearScenariosForRun()},[a]);b.useEffect(()=>{if(!s||l.current)return;l.current=!0;async function d(){const{setScenario:h}=a.getState().actions;for(const p of s.available_scenarios)try{const y=await t.makeRequest(`/api/eval/scenarios/${p.name}`);h(p.name,y)}catch(y){console.error(`Failed to load scenario ${p.name}:`,y)}}d()},[t,s,a]);const{runnableScenarios:C,personalityScenarios:v}=b.useMemo(()=>{if(!s)return{runnableScenarios:[],personalityScenarios:[]};const d=s.available_scenarios.map(h=>h.name);return{runnableScenarios:d.filter(h=>!be(h)),personalityScenarios:d.filter(h=>be(h))}},[s]),f=C.length>0&&C.every(d=>o.includes(d)),x=o.length>0&&!f;return s?C.length===0&&v.length===0?e.jsxs("div",{className:"flex h-full flex-col items-center justify-center p-6 text-center",children:[e.jsx("div",{className:"text-4xl mb-4",children:"ðŸ“­"}),e.jsx("p",{className:"text-foreground-500",children:"No scenarios found"}),e.jsx("p",{className:"text-xs text-foreground-400 mt-2",children:"Add scenario JSON files to the scenarios directory"})]}):e.jsxs("div",{className:"flex flex-col gap-2 p-4",children:[C.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("h2",{className:"text-sm font-semibold text-foreground-500 uppercase tracking-wide",children:["Scenarios (",C.length,")"]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(Ge,{size:"sm",isSelected:f,isIndeterminate:x,onValueChange:()=>{f?g():m()},children:e.jsx("span",{className:"text-xs",children:"All"})})})]}),C.map(d=>e.jsx(Oe,{name:d,scenario:r[d],execution:c[d],isSelected:n===d,isSelectedForRun:o.includes(d),onSelect:()=>i(d),onToggleForRun:()=>u(d),isRunnable:!0},d))]}),v.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("h2",{className:"text-sm font-semibold text-foreground-500 uppercase tracking-wide mt-4 mb-2",children:["Personalities (",v.length,")"]}),e.jsx("p",{className:"text-xs text-foreground-400 mb-2",children:"Used as simulated user profiles during scenario runs"}),v.map(d=>e.jsx(Oe,{name:d,scenario:r[d],execution:c[d],isSelected:n===d,isSelectedForRun:!1,onSelect:()=>i(d),isRunnable:!1},d))]})]}):e.jsx("div",{className:"flex h-full items-center justify-center",children:e.jsx(qe,{size:"sm"})})}function mt(){const{client:t}=Se(),a=te(),s=K(d=>d.config),r=K(d=>d.isExecuting),n=K(d=>d.executions),o=K(d=>d.selectedForRun),c=b.useMemo(()=>ve({executions:n}),[n]),l=b.useMemo(()=>s?s.available_scenarios.map(d=>d.name).filter(d=>!be(d)):[],[s]),i=b.useCallback(async d=>{const h=a.getState().isExecuting,p=a.getState().simulationConfig;if(!(d.length===0||h))try{const y=await fetch(`${t.getBaseUrl()}/api/eval/run`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({scenario_names:d,config:p})});if(!y.ok)throw new Error(`Failed to start evaluation: ${y.statusText}`);const j=(await y.json()).run_id;a.getState().actions.startExecution(j,d);const k=new EventSource(`${t.getBaseUrl()}/api/eval/progress/${j}`);k.onmessage=_=>{try{const w=JSON.parse(_.data);a.getState().actions.handleProgressUpdate(w),(w.type==="complete"||w.type==="error")&&ve(a.getState()).running===0&&k.close()}catch(w){console.error("Failed to parse progress update:",w)}},k.onerror=()=>{k.close()}}catch(y){console.error("Failed to start evaluation:",y)}},[t,a]),u=b.useCallback(()=>{const d=a.getState().selectedForRun;i(d)},[i,a]),m=b.useCallback(()=>{i(l)},[i,l]),g=b.useCallback(()=>{a.getState().actions.stopExecution()},[a]),C=b.useCallback(()=>{a.getState().actions.clearExecutions()},[a]),v=l.length>0,f=o.length>0,x=c.total>0;return e.jsxs("div",{className:"flex items-center justify-between gap-4 border-b border-divider px-6 py-3",children:[e.jsx("div",{className:"flex items-center gap-4 flex-1",children:x?e.jsxs(e.Fragment,{children:[e.jsx(ss,{"aria-label":"Execution progress",value:c.percentage,className:"max-w-xs",color:c.failed>0?"warning":"primary",size:"sm"}),e.jsxs("div",{className:"flex items-center gap-2",children:[c.completed>0&&e.jsxs(M,{size:"sm",color:"success",variant:"flat",children:[c.completed," completed"]}),c.failed>0&&e.jsxs(M,{size:"sm",color:"danger",variant:"flat",children:[c.failed," failed"]}),c.running>0&&e.jsxs(M,{size:"sm",color:"primary",variant:"flat",children:[c.running," running"]})]})]}):e.jsx("p",{className:"text-sm text-foreground-500",children:f?`${o.length} scenario${o.length!==1?"s":""} selected`:v?`${l.length} scenarios available`:"No scenarios loaded"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[r?e.jsx(Z,{color:"danger",variant:"flat",onPress:g,startContent:e.jsx(T,{icon:"heroicons:stop"}),children:"Stop All"}):e.jsxs(e.Fragment,{children:[f&&e.jsxs(Z,{color:"primary",onPress:u,startContent:e.jsx(T,{icon:"heroicons:play"}),children:["Run Selected (",o.length,")"]}),e.jsx(Z,{color:f?"default":"primary",variant:f?"flat":"solid",onPress:m,isDisabled:!v,startContent:e.jsx(T,{icon:"heroicons:play"}),children:"Run All"})]}),x&&!r&&e.jsx(Z,{variant:"light",onPress:C,startContent:e.jsx(T,{icon:"heroicons:trash"}),children:"Clear"})]})]})}function ft({scenarioName:t}){const a=K(r=>t?r.executions[t]:null),s=K(r=>t?r.scenarios[t]:null);return t?!a||a.turns.length===0?e.jsxs("div",{className:"flex h-full flex-col items-center justify-center p-8 text-center",children:[e.jsx(T,{icon:"heroicons:clock",className:"text-6xl text-foreground-300 mb-4"}),e.jsx("h2",{className:"text-lg font-medium text-foreground",children:a?"No Turns Yet":"Not Started"}),e.jsx("p",{className:"text-sm text-foreground-500 mt-2",children:a?"Waiting for conversation turns...":"Run the scenario to see the conversation"})]}):e.jsx(Ye,{className:"h-full",children:e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-foreground",children:t}),s&&e.jsxs("p",{className:"text-sm text-foreground-500",children:[s.tasks.length," tasks |"," ",a.turns.filter(r=>r.task_completed).length," completed"]})]}),a.turns.map((r,n)=>e.jsxs("div",{className:"space-y-3",children:[(n===0||r.task_index!==a.turns[n-1].task_index)&&e.jsxs("div",{className:"flex items-center gap-2 py-2",children:[e.jsx(Te,{className:"flex-1"}),e.jsxs(M,{size:"sm",variant:"flat",color:"primary",children:["Task ",r.task_index+1,s?.tasks[r.task_index]&&e.jsxs("span",{className:"ml-1 opacity-70",children:[": ",s.tasks[r.task_index].task.slice(0,30),"..."]})]}),e.jsx(Te,{className:"flex-1"})]}),e.jsx(se,{className:"ml-8 bg-primary-50 dark:bg-primary-900/20",children:e.jsx(ee,{className:"p-3",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-primary flex items-center justify-center flex-shrink-0",children:e.jsx(T,{icon:"heroicons:user",className:"text-white text-sm"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs text-foreground-500 mb-1",children:"Simulated User"}),e.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none",children:e.jsx(De,{remarkPlugins:[Ke],children:r.user_message})})]})]})})}),e.jsx(se,{className:"mr-8",children:e.jsx(ee,{className:"p-3",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-success flex items-center justify-center flex-shrink-0",children:e.jsx(T,{icon:"heroicons:cpu-chip",className:"text-white text-sm"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs text-foreground-500 mb-1",children:"Assistant"}),e.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none",children:e.jsx(De,{remarkPlugins:[Ke],children:r.assistant_message})}),r.tool_calls.length>0&&e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsx("p",{className:"text-xs text-foreground-500",children:"Tools Used:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:r.tool_calls.map((o,c)=>e.jsx(M,{size:"sm",variant:"flat",children:o.name},c))})]})]})]})})}),r.task_completed&&e.jsx("div",{className:"flex items-center justify-center gap-2 py-2",children:e.jsxs(M,{size:"sm",color:"success",variant:"flat",startContent:e.jsx(T,{icon:"heroicons:check"}),children:["Task Completed: ",r.task_completed_reason]})})]},n)),a.status==="running"&&e.jsxs("div",{className:"flex items-center justify-center gap-2 py-4",children:[e.jsx(T,{icon:"heroicons:arrow-path",className:"animate-spin text-primary"}),e.jsxs("span",{className:"text-sm text-foreground-500",children:["Processing turn ",a.currentTurn+1,"..."]})]}),a.status==="completed"&&e.jsx("div",{className:"flex items-center justify-center gap-2 py-4",children:e.jsx(M,{color:"success",variant:"flat",startContent:e.jsx(T,{icon:"heroicons:check"}),children:"Scenario Completed"})}),a.status==="failed"&&e.jsxs("div",{className:"flex flex-col items-center justify-center gap-2 py-4",children:[e.jsx(M,{color:"danger",variant:"flat",startContent:e.jsx(T,{icon:"heroicons:x-mark"}),children:"Scenario Failed"}),a.error&&e.jsx("p",{className:"text-sm text-danger",children:a.error})]})]})}):e.jsxs("div",{className:"flex h-full flex-col items-center justify-center p-8 text-center",children:[e.jsx(T,{icon:"heroicons:chat-bubble-left-right",className:"text-6xl text-foreground-300 mb-4"}),e.jsx("h2",{className:"text-lg font-medium text-foreground",children:"Select a Scenario"}),e.jsx("p",{className:"text-sm text-foreground-500 mt-2",children:"Click on a scenario to view its conversation"})]})}function bt(){const t=te(),a=K(l=>l.executions),s=b.useMemo(()=>ve({executions:a}),[a]),r=b.useCallback(l=>{const{selectScenario:i,setViewMode:u}=t.getState().actions;i(l),u("conversation")},[t]),n=Object.values(a);if(n.length===0)return e.jsxs("div",{className:"flex h-full flex-col items-center justify-center p-8 text-center",children:[e.jsx(T,{icon:"heroicons:chart-bar",className:"text-6xl text-foreground-300 mb-4"}),e.jsx("h2",{className:"text-lg font-medium text-foreground",children:"No Results Yet"}),e.jsx("p",{className:"text-sm text-foreground-500 mt-2",children:"Run scenarios to see results here"})]});const o=n.reduce((l,i)=>l+i.turns.length,0),c=n.reduce((l,i)=>l+i.turns.filter(u=>u.task_completed).length,0);return e.jsx(Ye,{className:"h-full",children:e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs(se,{children:[e.jsx(Hs,{className:"pb-2",children:e.jsx("h3",{className:"text-lg font-semibold",children:"Overall Progress"})}),e.jsxs(ee,{className:"gap-4",children:[e.jsx(ss,{"aria-label":"Overall progress",value:s.percentage,color:s.failed>0?"warning":"primary",showValueLabel:!0,className:"max-w-full"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-foreground",children:s.total}),e.jsx("p",{className:"text-xs text-foreground-500",children:"Total Scenarios"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-success",children:s.completed}),e.jsx("p",{className:"text-xs text-foreground-500",children:"Completed"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-foreground",children:o}),e.jsx("p",{className:"text-xs text-foreground-500",children:"Total Turns"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-foreground",children:c}),e.jsx("p",{className:"text-xs text-foreground-500",children:"Tasks Completed"})]})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.map(l=>e.jsx(se,{isPressable:!0,onPress:()=>r(l.scenarioName),className:"hover:border-primary transition-colors",children:e.jsxs(ee,{className:"gap-3",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx("h4",{className:"font-medium text-foreground truncate flex-1",children:l.scenarioName}),e.jsx(xt,{status:l.status})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-foreground-500",children:[e.jsx(T,{icon:"heroicons:chat-bubble-left-right",className:"text-lg"}),e.jsxs("span",{children:[l.turns.length," turns"]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-foreground-500",children:[e.jsx(T,{icon:"heroicons:check",className:"text-lg"}),e.jsxs("span",{children:[l.turns.filter(i=>i.task_completed).length," tasks"]})]})]}),l.error&&e.jsx("p",{className:"text-xs text-danger line-clamp-2",children:l.error}),l.status==="running"&&e.jsxs("div",{className:"flex items-center gap-2 text-xs text-primary",children:[e.jsx(T,{icon:"heroicons:arrow-path",className:"animate-spin"}),e.jsxs("span",{children:["Turn ",l.currentTurn," | Task"," ",l.currentTaskIndex+1]})]})]})},l.scenarioName))})]})})}function xt({status:t}){const a={idle:{color:"default",label:"Idle"},queued:{color:"primary",label:"Queued"},running:{color:"primary",label:"Running"},completed:{color:"success",label:"Done"},failed:{color:"danger",label:"Failed"},timeout:{color:"warning",label:"Timeout"}},{color:s,label:r}=a[t]??a.idle;return e.jsx(M,{size:"sm",color:s,variant:"flat",children:r})}function ht(){const t=te(),a=K(n=>n.viewMode),s=K(n=>n.selectedScenarioName),r=b.useCallback(n=>{t.getState().actions.setViewMode(n)},[t]);return e.jsxs("div",{className:"flex h-full min-h-0 flex-col",children:[e.jsx("div",{className:"border-b border-divider px-4 py-2",children:e.jsxs(nt,{selectedKey:a,onSelectionChange:r,size:"sm",variant:"underlined",children:[e.jsx(We,{title:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(T,{icon:"heroicons:chart-bar"}),e.jsx("span",{children:"Summary"})]})},"summary"),e.jsx(We,{title:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(T,{icon:"heroicons:chat-bubble-left-right"}),e.jsx("span",{children:"Conversation"})]})},"conversation")]})}),e.jsx("div",{className:"flex-1 min-h-0 overflow-hidden",children:a==="summary"?e.jsx(bt,{}):e.jsx(ft,{scenarioName:s})})]})}function gt(){const{theme:t,setTheme:a}=$s(),s=t===ge.DARK,r=()=>a(s?ge.LIGHT:ge.DARK);return e.jsxs("div",{className:"flex h-full flex-col bg-background",children:[e.jsxs("header",{className:"flex items-center justify-between border-b border-divider px-6 py-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl",children:"ðŸ§ª"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-semibold text-foreground",children:"Ragbits Evaluation"}),e.jsx("p",{className:"text-xs text-foreground-500",children:"Test scenarios and view results"})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(Z,{isIconOnly:!0,variant:"light",onPress:r,"aria-label":"Toggle theme",children:e.jsx(T,{icon:s?"heroicons:sun":"heroicons:moon",className:"text-xl"})})})]}),e.jsx(mt,{}),e.jsxs("div",{className:"flex flex-1 min-h-0 overflow-hidden",children:[e.jsx("aside",{className:"w-80 flex-shrink-0 border-r border-divider overflow-y-auto",children:e.jsx(ut,{})}),e.jsx("main",{className:"flex-1 min-h-0 overflow-hidden",children:e.jsx(ht,{})})]})]})}function pt(){const{client:t}=Se(),a=te(),s=K(o=>o.isConfigLoading),r=K(o=>o.configError),n=b.useRef(!1);return b.useEffect(()=>{if(n.current)return;n.current=!0;async function o(){const{setConfigLoading:c,setConfig:l,setConfigError:i}=a.getState().actions;c(!0);try{const u=await t.makeRequest("/api/eval/config");l(u)}catch(u){i(u instanceof Error?u.message:"Failed to load config")}}o()},[t,a]),s?e.jsx("div",{className:"flex h-full items-center justify-center bg-background",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx(qe,{size:"lg"}),e.jsx("p",{className:"text-foreground-500",children:"Loading evaluation configuration..."})]})}):r?e.jsx("div",{className:"flex h-full items-center justify-center bg-background",children:e.jsxs("div",{className:"flex flex-col items-center gap-4 text-center",children:[e.jsx("div",{className:"text-6xl",children:"!"}),e.jsx("h1",{className:"text-xl font-semibold text-danger",children:"Failed to Connect"}),e.jsx("p",{className:"max-w-md text-foreground-500",children:"Could not connect to the evaluation API. Make sure the EvalAPI server is running."}),e.jsx("p",{className:"text-sm text-foreground-400",children:r}),e.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 rounded-lg bg-primary px-4 py-2 text-white hover:bg-primary-600",children:"Retry"})]})}):e.jsx(gt,{})}const vt="";Ts(["heroicons:check","heroicons:x-mark","heroicons:play","heroicons:stop","heroicons:arrow-path","heroicons:sun","heroicons:moon","heroicons:chevron-down","heroicons:chevron-right","heroicons:document-text","heroicons:clipboard","heroicons:trash","heroicons:pencil","heroicons:eye","heroicons:chart-bar","heroicons:chat-bubble-left-right","heroicons:clock","heroicons:currency-dollar","heroicons:cpu-chip"]);Ds.createRoot(document.getElementById("root")).render(e.jsx(b.StrictMode,{children:e.jsx(Ks,{children:e.jsx(Fs,{baseUrl:vt,children:e.jsx(As,{children:e.jsx(ct,{children:e.jsx(Ls,{children:e.jsx(pt,{})})})})})})}));
