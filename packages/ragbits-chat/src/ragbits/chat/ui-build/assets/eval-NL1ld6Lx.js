import{l as is,d as cs,z as Ue,A as we,B as te,an as ds,W as Y,J as X,O,V as e,I as Se,ad as _e,aY as us,r as f,ao as ms,U as Ge,L as Je,K as Ce,N as Pe,P as q,Q as H,S as xe,aZ as xs,a_ as Ie,aj as qe,ak as hs,al as fs,E as gs,a$ as ps,D as bs,p as Re,s as Ye,$ as vs,H as js,a9 as ys,b0 as Ns,af as ks,X as ws,Y as Ss,a0 as _s,a5 as Cs,a6 as Ps,ax as Rs,au as Ts,aw as Ds,av as Ee,aD as Xe,aC as $s,aE as I,aB as v,ar as ve,b1 as Qe,aA as K,aG as je,a4 as ae,ay as he,az as fe,aF as Is,aK as Es,aL as ke,aR as As,aS as Ks,aT as Ls,aU as Fs,aW as Ms,aX as Hs}from"./useThemeContext-CXEHnhK-.js";import{$ as Ws}from"./useHasTabbableChild-LMP191lJ.js";import{$ as Vs}from"./useSelectableItem-BMjT4ZeY.js";import{d as Os}from"./features-animation-CL71PIGH.js";import{$ as Bs}from"./useListState-hBaYo1Zk.js";import{i as Ae}from"./chunk-SSA7SXE4-CsstRNQK.js";const zs={...Os,...cs,...is};var Ke=Ue({slots:{base:"inline-flex",tabList:["flex","p-1","h-fit","gap-2","items-center","flex-nowrap","overflow-x-scroll","scrollbar-hide","bg-default-100"],tab:["z-0","w-full","px-3","py-1","flex","group","relative","justify-center","items-center","outline-hidden","cursor-pointer","transition-opacity","tap-highlight-transparent","data-[disabled=true]:cursor-not-allowed","data-[disabled=true]:opacity-30","data-[hover-unselected=true]:opacity-disabled",...we],tabContent:["relative","z-10","text-inherit","whitespace-nowrap","transition-colors","text-default-500","group-data-[selected=true]:text-foreground"],cursor:["absolute","z-0","bg-white"],panel:["py-3","px-1","outline-hidden","data-[inert=true]:hidden",...we],tabWrapper:[]},variants:{variant:{solid:{cursor:"inset-0"},light:{tabList:"bg-transparent dark:bg-transparent",cursor:"inset-0"},underlined:{tabList:"bg-transparent dark:bg-transparent",cursor:"h-[2px] w-[80%] bottom-0 shadow-[0_1px_0px_0_rgba(0,0,0,0.05)]"},bordered:{tabList:"bg-transparent dark:bg-transparent border-medium border-default-200 shadow-xs",cursor:"inset-0"}},color:{default:{},primary:{},secondary:{},success:{},warning:{},danger:{}},size:{sm:{tabList:"rounded-medium",tab:"h-7 text-tiny rounded-small",cursor:"rounded-small"},md:{tabList:"rounded-medium",tab:"h-8 text-small rounded-small",cursor:"rounded-small"},lg:{tabList:"rounded-large",tab:"h-9 text-medium rounded-medium",cursor:"rounded-medium"}},radius:{none:{tabList:"rounded-none",tab:"rounded-none",cursor:"rounded-none"},sm:{tabList:"rounded-medium",tab:"rounded-small",cursor:"rounded-small"},md:{tabList:"rounded-medium",tab:"rounded-small",cursor:"rounded-small"},lg:{tabList:"rounded-large",tab:"rounded-medium",cursor:"rounded-medium"},full:{tabList:"rounded-full",tab:"rounded-full",cursor:"rounded-full"}},fullWidth:{true:{base:"w-full",tabList:"w-full"}},isDisabled:{true:{tabList:"opacity-disabled pointer-events-none"}},disableAnimation:{true:{tab:"transition-none",tabContent:"transition-none"}},placement:{top:{},start:{tabList:"flex-col",panel:"py-0 px-3",tabWrapper:"flex"},end:{tabList:"flex-col",panel:"py-0 px-3",tabWrapper:"flex flex-row-reverse"},bottom:{tabWrapper:"flex flex-col-reverse"}}},defaultVariants:{color:"default",variant:"solid",size:"md",fullWidth:!1,isDisabled:!1},compoundVariants:[{variant:["solid","bordered","light"],color:"default",class:{cursor:["bg-background","dark:bg-default","shadow-small"],tabContent:"group-data-[selected=true]:text-default-foreground"}},{variant:["solid","bordered","light"],color:"primary",class:{cursor:te.solid.primary,tabContent:"group-data-[selected=true]:text-primary-foreground"}},{variant:["solid","bordered","light"],color:"secondary",class:{cursor:te.solid.secondary,tabContent:"group-data-[selected=true]:text-secondary-foreground"}},{variant:["solid","bordered","light"],color:"success",class:{cursor:te.solid.success,tabContent:"group-data-[selected=true]:text-success-foreground"}},{variant:["solid","bordered","light"],color:"warning",class:{cursor:te.solid.warning,tabContent:"group-data-[selected=true]:text-warning-foreground"}},{variant:["solid","bordered","light"],color:"danger",class:{cursor:te.solid.danger,tabContent:"group-data-[selected=true]:text-danger-foreground"}},{variant:"underlined",color:"default",class:{cursor:"bg-foreground",tabContent:"group-data-[selected=true]:text-foreground"}},{variant:"underlined",color:"primary",class:{cursor:"bg-primary",tabContent:"group-data-[selected=true]:text-primary"}},{variant:"underlined",color:"secondary",class:{cursor:"bg-secondary",tabContent:"group-data-[selected=true]:text-secondary"}},{variant:"underlined",color:"success",class:{cursor:"bg-success",tabContent:"group-data-[selected=true]:text-success"}},{variant:"underlined",color:"warning",class:{cursor:"bg-warning",tabContent:"group-data-[selected=true]:text-warning"}},{variant:"underlined",color:"danger",class:{cursor:"bg-danger",tabContent:"group-data-[selected=true]:text-danger"}},{disableAnimation:!0,variant:"underlined",class:{tab:["after:content-['']","after:absolute","after:bottom-0","after:h-[2px]","after:w-[80%]","after:opacity-0","after:shadow-[0_1px_0px_0_rgba(0,0,0,0.05)]","data-[selected=true]:after:opacity-100"]}},{disableAnimation:!0,color:"default",variant:["solid","bordered","light"],class:{tab:"data-[selected=true]:bg-default data-[selected=true]:text-default-foreground"}},{disableAnimation:!0,color:"primary",variant:["solid","bordered","light"],class:{tab:"data-[selected=true]:bg-primary data-[selected=true]:text-primary-foreground"}},{disableAnimation:!0,color:"secondary",variant:["solid","bordered","light"],class:{tab:"data-[selected=true]:bg-secondary data-[selected=true]:text-secondary-foreground"}},{disableAnimation:!0,color:"success",variant:["solid","bordered","light"],class:{tab:"data-[selected=true]:bg-success data-[selected=true]:text-success-foreground"}},{disableAnimation:!0,color:"warning",variant:["solid","bordered","light"],class:{tab:"data-[selected=true]:bg-warning data-[selected=true]:text-warning-foreground"}},{disableAnimation:!0,color:"danger",variant:["solid","bordered","light"],class:{tab:"data-[selected=true]:bg-danger data-[selected=true]:text-danger-foreground"}},{disableAnimation:!0,color:"default",variant:"underlined",class:{tab:"data-[selected=true]:after:bg-foreground"}},{disableAnimation:!0,color:"primary",variant:"underlined",class:{tab:"data-[selected=true]:after:bg-primary"}},{disableAnimation:!0,color:"secondary",variant:"underlined",class:{tab:"data-[selected=true]:after:bg-secondary"}},{disableAnimation:!0,color:"success",variant:"underlined",class:{tab:"data-[selected=true]:after:bg-success"}},{disableAnimation:!0,color:"warning",variant:"underlined",class:{tab:"data-[selected=true]:after:bg-warning"}},{disableAnimation:!0,color:"danger",variant:"underlined",class:{tab:"data-[selected=true]:after:bg-danger"}}],compoundSlots:[{variant:"underlined",slots:["tab","tabList","cursor"],class:["rounded-none"]}]}),Le=Ue({slots:{base:["flex","flex-col","relative","overflow-hidden","h-auto","outline-hidden","text-foreground","box-border","bg-content1",...we],header:["flex","p-3","z-10","w-full","justify-start","items-center","shrink-0","overflow-inherit","color-inherit","subpixel-antialiased"],body:["relative","flex","flex-1","w-full","p-3","flex-auto","flex-col","place-content-inherit","align-items-inherit","h-auto","break-words","text-left","overflow-y-auto","subpixel-antialiased"],footer:["p-3","h-auto","flex","w-full","items-center","overflow-hidden","color-inherit","subpixel-antialiased"]},variants:{shadow:{none:{base:"shadow-none"},sm:{base:"shadow-small"},md:{base:"shadow-medium"},lg:{base:"shadow-large"}},radius:{none:{base:"rounded-none",header:"rounded-none",footer:"rounded-none"},sm:{base:"rounded-small",header:"rounded-t-small",footer:"rounded-b-small"},md:{base:"rounded-medium",header:"rounded-t-medium",footer:"rounded-b-medium"},lg:{base:"rounded-large",header:"rounded-t-large",footer:"rounded-b-large"}},fullWidth:{true:{base:"w-full"}},isHoverable:{true:{base:"data-[hover=true]:bg-content2 dark:data-[hover=true]:bg-content2"}},isPressable:{true:{base:"cursor-pointer"}},isBlurred:{true:{base:["bg-background/80","dark:bg-background/20","backdrop-blur-md","backdrop-saturate-150"]}},isFooterBlurred:{true:{footer:["bg-background/10","backdrop-blur","backdrop-saturate-150"]}},isDisabled:{true:{base:"opacity-disabled cursor-not-allowed"}},disableAnimation:{true:"",false:{base:"transition-transform-background motion-reduce:transition-none"}}},compoundVariants:[{isPressable:!0,class:"data-[pressed=true]:scale-[0.97] tap-highlight-transparent"}],defaultVariants:{radius:"lg",shadow:"md",fullWidth:!1,isHoverable:!1,isPressable:!1,isDisabled:!1,isFooterBlurred:!1}}),[Us,Ze]=ds({name:"CardContext",strict:!0,errorMessage:"useCardContext: `context` is undefined. Seems you forgot to wrap component within <Card />"}),es=Y((t,a)=>{var s;const{as:r,className:n,children:o,...d}=t,l=r||"div",c=X(a),{slots:u,classNames:m}=Ze(),j=O(m?.body,n);return e.jsx(l,{ref:c,className:(s=u.body)==null?void 0:s.call(u,{class:j}),...d,children:o})});es.displayName="HeroUI.CardBody";var W=es,ss=Y((t,a)=>{var s;const{as:r,className:n,children:o,...d}=t,l=r||"div",c=X(a),{slots:u,classNames:m}=Ze(),j=O(m?.header,n);return e.jsx(l,{ref:c,className:(s=u.header)==null?void 0:s.call(u,{class:j}),...d,children:o})});ss.displayName="HeroUI.CardHeader";var Gs=ss;function Js(t){var a,s,r,n;const o=Se(),[d,l]=_e(t,Le.variantKeys),{ref:c,as:u,children:m,onClick:j,onPress:N,autoFocus:S,className:g,classNames:p,allowTextSelectionOnPress:x=!0,...h}=d,i=X(c),b=u||(t.isPressable?"button":"div"),k=typeof b=="string",y=(s=(a=t.disableAnimation)!=null?a:o?.disableAnimation)!=null?s:!1,R=(n=(r=t.disableRipple)!=null?r:o?.disableRipple)!=null?n:!1,C=O(p?.base,g),{onClear:w,onPress:A,ripples:L}=us(),F=f.useCallback(U=>{R||y||i.current&&A(U)},[R,y,i,A]),{buttonProps:M,isPressed:D}=ms({onPress:Ge(N,F),elementType:u,isDisabled:!t.isPressable,onClick:j,allowTextSelectionOnPress:x,...h},i),{hoverProps:$,isHovered:T}=Je({isDisabled:!t.isHoverable,...h}),{isFocusVisible:E,isFocused:_,focusProps:B}=Ce({autoFocus:S}),z=f.useMemo(()=>Le({...l,disableAnimation:y}),[Pe(l),y]),Z=f.useMemo(()=>({slots:z,classNames:p,disableAnimation:y,isDisabled:t.isDisabled,isFooterBlurred:t.isFooterBlurred,fullWidth:t.fullWidth}),[z,p,t.isDisabled,t.isFooterBlurred,y,t.fullWidth]),ee=f.useCallback((U={})=>({ref:i,className:z.base({class:C}),tabIndex:t.isPressable?0:-1,"data-hover":H(T),"data-pressed":H(D),"data-focus":H(_),"data-focus-visible":H(E),"data-disabled":H(t.isDisabled),...q(t.isPressable?{...M,...B,role:"button"}:{},t.isHoverable?$:{},xe(h,{enabled:k}),xe(U))}),[i,z,C,k,t.isPressable,t.isHoverable,t.isDisabled,T,D,E,M,B,$,h]),se=f.useCallback(()=>({ripples:L,onClear:w}),[L,w]);return{context:Z,domRef:i,Component:b,classNames:p,children:m,isHovered:T,isPressed:D,disableAnimation:y,isPressable:t.isPressable,isHoverable:t.isHoverable,disableRipple:R,handlePress:F,isFocusVisible:E,getCardProps:ee,getRippleProps:se}}var ts=Y((t,a)=>{const{children:s,context:r,Component:n,isPressable:o,disableAnimation:d,disableRipple:l,getCardProps:c,getRippleProps:u}=Js({...t,ref:a});return e.jsxs(n,{...c(),children:[e.jsx(Us,{value:r,children:s}),o&&!d&&!l&&e.jsx(xs,{...u()})]})});ts.displayName="HeroUI.Card";var V=ts;const Fe=t=>typeof t=="object"&&t!=null&&t.nodeType===1,Me=(t,a)=>(!a||t!=="hidden")&&t!=="visible"&&t!=="clip",ue=(t,a)=>{if(t.clientHeight<t.scrollHeight||t.clientWidth<t.scrollWidth){const s=getComputedStyle(t,null);return Me(s.overflowY,a)||Me(s.overflowX,a)||(r=>{const n=(o=>{if(!o.ownerDocument||!o.ownerDocument.defaultView)return null;try{return o.ownerDocument.defaultView.frameElement}catch{return null}})(r);return!!n&&(n.clientHeight<r.scrollHeight||n.clientWidth<r.scrollWidth)})(t)}return!1},me=(t,a,s,r,n,o,d,l)=>o<t&&d>a||o>t&&d<a?0:o<=t&&l<=s||d>=a&&l>=s?o-t-r:d>a&&l<s||o<t&&l>s?d-a+n:0,qs=t=>{const a=t.parentElement;return a??(t.getRootNode().host||null)},He=(t,a)=>{var s,r,n,o;if(typeof document>"u")return[];const{scrollMode:d,block:l,inline:c,boundary:u,skipOverflowHiddenElements:m}=a,j=typeof u=="function"?u:E=>E!==u;if(!Fe(t))throw new TypeError("Invalid target");const N=document.scrollingElement||document.documentElement,S=[];let g=t;for(;Fe(g)&&j(g);){if(g=qs(g),g===N){S.push(g);break}g!=null&&g===document.body&&ue(g)&&!ue(document.documentElement)||g!=null&&ue(g,m)&&S.push(g)}const p=(r=(s=window.visualViewport)==null?void 0:s.width)!=null?r:innerWidth,x=(o=(n=window.visualViewport)==null?void 0:n.height)!=null?o:innerHeight,{scrollX:h,scrollY:i}=window,{height:b,width:k,top:y,right:R,bottom:C,left:w}=t.getBoundingClientRect(),{top:A,right:L,bottom:F,left:M}=(E=>{const _=window.getComputedStyle(E);return{top:parseFloat(_.scrollMarginTop)||0,right:parseFloat(_.scrollMarginRight)||0,bottom:parseFloat(_.scrollMarginBottom)||0,left:parseFloat(_.scrollMarginLeft)||0}})(t);let D=l==="start"||l==="nearest"?y-A:l==="end"?C+F:y+b/2-A+F,$=c==="center"?w+k/2-M+L:c==="end"?R+L:w-M;const T=[];for(let E=0;E<S.length;E++){const _=S[E],{height:B,width:z,top:Z,right:ee,bottom:se,left:U}=_.getBoundingClientRect();if(d==="if-needed"&&y>=0&&w>=0&&C<=x&&R<=p&&(_===N&&!ue(_)||y>=Z&&C<=se&&w>=U&&R<=ee))return T;const re=getComputedStyle(_),ne=parseInt(re.borderLeftWidth,10),le=parseInt(re.borderTopWidth,10),oe=parseInt(re.borderRightWidth,10),ie=parseInt(re.borderBottomWidth,10);let G=0,J=0;const ce="offsetWidth"in _?_.offsetWidth-_.clientWidth-ne-oe:0,de="offsetHeight"in _?_.offsetHeight-_.clientHeight-le-ie:0,ye="offsetWidth"in _?_.offsetWidth===0?0:z/_.offsetWidth:0,Ne="offsetHeight"in _?_.offsetHeight===0?0:B/_.offsetHeight:0;if(N===_)G=l==="start"?D:l==="end"?D-x:l==="nearest"?me(i,i+x,x,le,ie,i+D,i+D+b,b):D-x/2,J=c==="start"?$:c==="center"?$-p/2:c==="end"?$-p:me(h,h+p,p,ne,oe,h+$,h+$+k,k),G=Math.max(0,G+i),J=Math.max(0,J+h);else{G=l==="start"?D-Z-le:l==="end"?D-se+ie+de:l==="nearest"?me(Z,se,B,le,ie+de,D,D+b,b):D-(Z+B/2)+de/2,J=c==="start"?$-U-ne:c==="center"?$-(U+z/2)+ce/2:c==="end"?$-ee+oe+ce:me(U,ee,z,ne,oe+ce,$,$+k,k);const{scrollLeft:De,scrollTop:$e}=_;G=Ne===0?0:Math.max(0,Math.min($e+G/Ne,_.scrollHeight-B/Ne+de)),J=ye===0?0:Math.max(0,Math.min(De+J/ye,_.scrollWidth-z/ye+ce)),D+=$e-G,$+=De-J}T.push({el:_,top:G,left:J})}return T},Ys=t=>t===!1?{block:"end",inline:"nearest"}:(a=>a===Object(a)&&Object.keys(a).length!==0)(t)?t:{block:"start",inline:"nearest"};function Xs(t,a){if(!t.isConnected||!(r=>{let n=r;for(;n&&n.parentNode;){if(n.parentNode===document)return!0;n=n.parentNode instanceof ShadowRoot?n.parentNode.host:n.parentNode}return!1})(t))return;if((r=>typeof r=="object"&&typeof r.behavior=="function")(a))return a.behavior(He(t,a));const s=typeof a=="boolean"||a==null?void 0:a.behavior;for(const{el:r,top:n,left:o}of He(t,Ys(a)))r.scroll({top:n,left:o,behavior:s})}function Qs(t){var a,s;const r=Se(),[n,o]=_e(t,Ie.variantKeys),{ref:d,as:l,id:c,className:u,classNames:m,label:j,valueLabel:N,value:S=0,minValue:g=0,maxValue:p=100,showValueLabel:x=!1,formatOptions:h={style:"percent"},...i}=n,b=l||"div",k=X(d),y=O(m?.base,u),[,R]=qe({rerender:!0,delay:100}),C=t.isIndeterminate,w=(s=(a=t.disableAnimation)!=null?a:r?.disableAnimation)!=null?s:!1,{progressBarProps:A,labelProps:L}=hs({id:c,label:j,value:S,minValue:g,maxValue:p,valueLabel:N,formatOptions:h,isIndeterminate:C,"aria-labelledby":t["aria-labelledby"],"aria-label":t["aria-label"]}),F=f.useMemo(()=>Ie({...o,disableAnimation:w}),[Pe(o),w]),M=w?!0:R,D=f.useMemo(()=>C||!M?void 0:fs((S-g)/(p-g)*100),[M,C,S,g,p]),$=f.useCallback((E={})=>({ref:k,"data-indeterminate":H(C),"data-disabled":H(t.isDisabled),className:F.base({class:y}),...q(A,i,E)}),[k,F,C,t.isDisabled,y,A,i]),T=f.useCallback((E={})=>({className:F.label({class:m?.label}),...q(L,E)}),[F,m,L]);return{Component:b,domRef:k,slots:F,classNames:m,label:j,percentage:D,showValueLabel:x,getProgressBarProps:$,getLabelProps:T}}var as=Y((t,a)=>{const{Component:s,slots:r,classNames:n,label:o,percentage:d,showValueLabel:l,getProgressBarProps:c,getLabelProps:u}=Qs({...t,ref:a}),m=c(),j=o||l;return e.jsxs(s,{...m,children:[j?e.jsxs("div",{className:r.labelWrapper({class:n?.labelWrapper}),children:[o&&e.jsx("span",{...u(),children:o}),l&&e.jsx("span",{className:r.value({class:n?.value}),children:m["aria-valuetext"]})]}):null,e.jsx("div",{className:r.track({class:n?.track}),children:e.jsx("div",{className:r.indicator({class:n?.indicator}),style:{transform:`translateX(-${100-(d||0)}%)`}})})]})});as.displayName="HeroUI.Progress";var rs=as;const ns=new WeakMap;function ge(t,a,s){return t?(typeof a=="string"&&(a=a.replace(/\s+/g,"")),`${ns.get(t)}-${s}-${a}`):""}function Zs(t,a,s){let{key:r,isDisabled:n,shouldSelectOnPressUp:o}=t,{selectionManager:d,selectedKey:l}=a,c=r===l,u=n||a.isDisabled||a.selectionManager.isDisabled(r),{itemProps:m,isPressed:j}=Vs({selectionManager:d,key:r,ref:s,isDisabled:u,shouldSelectOnPressUp:o,linkBehavior:"selection"}),N=ge(a,r,"tab"),S=ge(a,r,"tabpanel"),{tabIndex:g}=m,p=a.collection.getItem(r),x=gs(p?.props,{labelable:!0});delete x.id;let h=ps(p?.props),{focusableProps:i}=bs({isDisabled:u},s);return{tabProps:Re(x,i,h,m,{id:N,"aria-selected":c,"aria-disabled":u||void 0,"aria-controls":c?S:void 0,tabIndex:u?void 0:g,role:"tab"}),isSelected:c,isDisabled:u,isPressed:j}}function et(t,a,s){let r=Ws(s)?void 0:0;var n;const o=ge(a,(n=t.id)!==null&&n!==void 0?n:a?.selectedKey,"tabpanel"),d=Ye({...t,id:o,"aria-labelledby":ge(a,a?.selectedKey,"tab")});return{tabPanelProps:Re(d,{tabIndex:r,role:"tabpanel","aria-describedby":t["aria-describedby"],"aria-details":t["aria-details"]})}}class st{getKeyLeftOf(a){return this.flipDirection?this.getNextKey(a):this.getPreviousKey(a)}getKeyRightOf(a){return this.flipDirection?this.getPreviousKey(a):this.getNextKey(a)}isDisabled(a){var s,r;return this.disabledKeys.has(a)||!!(!((r=this.collection.getItem(a))===null||r===void 0||(s=r.props)===null||s===void 0)&&s.isDisabled)}getFirstKey(){let a=this.collection.getFirstKey();return a!=null&&this.isDisabled(a)&&(a=this.getNextKey(a)),a}getLastKey(){let a=this.collection.getLastKey();return a!=null&&this.isDisabled(a)&&(a=this.getPreviousKey(a)),a}getKeyAbove(a){return this.tabDirection?null:this.getPreviousKey(a)}getKeyBelow(a){return this.tabDirection?null:this.getNextKey(a)}getNextKey(a){let s=a;do s=this.collection.getKeyAfter(s),s==null&&(s=this.collection.getFirstKey());while(s!=null&&this.isDisabled(s));return s}getPreviousKey(a){let s=a;do s=this.collection.getKeyBefore(s),s==null&&(s=this.collection.getLastKey());while(s!=null&&this.isDisabled(s));return s}constructor(a,s,r,n=new Set){this.collection=a,this.flipDirection=s==="rtl"&&r==="horizontal",this.disabledKeys=n,this.tabDirection=r==="horizontal"}}function tt(t,a,s){let{orientation:r="horizontal",keyboardActivation:n="automatic"}=t,{collection:o,selectionManager:d,disabledKeys:l}=a,{direction:c}=vs(),u=f.useMemo(()=>new st(o,c,r,l),[o,l,r,c]),{collectionProps:m}=js({ref:s,selectionManager:d,keyboardDelegate:u,selectOnFocus:n==="automatic",disallowEmptySelection:!0,scrollRef:s,linkBehavior:"selection"}),j=ys();ns.set(a,j);let N=Ye({...t,id:j});return{tabListProps:{...Re(m,N),role:"tablist","aria-orientation":r,tabIndex:void 0}}}var ls=Y((t,a)=>{var s,r;const{as:n,tabKey:o,destroyInactiveTabPanel:d,state:l,className:c,slots:u,classNames:m,...j}=t,N=n||"div",S=X(a),{tabPanelProps:g}=et({...t,id:String(o)},l,S),{focusProps:p,isFocused:x,isFocusVisible:h}=Ce(),i=l.selectedItem,b=l.collection.getItem(o).props.children,k=O(m?.panel,c,(s=i?.props)==null?void 0:s.className),y=o===i?.key;return!b||!y&&d?null:e.jsx(N,{ref:S,"data-focus":x,"data-focus-visible":h,"data-inert":y?void 0:"true",inert:Ns(!y),...y&&q(g,p,j),className:(r=u.panel)==null?void 0:r.call(u,{class:k}),"data-slot":"panel",children:b})});ls.displayName="HeroUI.TabPanel";var at=ls,os=Y((t,a)=>{var s;const{className:r,as:n,item:o,state:d,classNames:l,isDisabled:c,listRef:u,slots:m,motionProps:j,disableAnimation:N,disableCursorAnimation:S,shouldSelectOnPressUp:g,onClick:p,tabRef:x,...h}=t,{key:i}=o,b=X(a),k=n||(t.href?"a":"button"),y=typeof k=="string",{tabProps:R,isSelected:C,isDisabled:w,isPressed:A}=Zs({key:i,isDisabled:c,shouldSelectOnPressUp:g},d,b);t.children==null&&delete R["aria-controls"];const L=c||w,{focusProps:F,isFocused:M,isFocusVisible:D}=Ce(),{hoverProps:$,isHovered:T}=Je({isDisabled:L}),E=O(l?.tab,r),[,_]=qe({rerender:!0}),B=()=>{!b?.current||!u?.current||Xs(b.current,{scrollMode:"if-needed",behavior:"smooth",block:"end",inline:"end",boundary:u?.current})};return e.jsxs(k,{ref:ks(b,x),"data-disabled":H(w),"data-focus":H(M),"data-focus-visible":H(D),"data-hover":H(T),"data-hover-unselected":H((T||A)&&!C),"data-pressed":H(A),"data-selected":H(C),"data-slot":"tab",...q(R,L?{}:{...F,...$},xe(h,{enabled:y,omitPropNames:new Set(["title"])}),{onClick:Ge(B,p,R.onClick)}),className:(s=m.tab)==null?void 0:s.call(m,{class:E}),title:h?.titleValue,type:k==="button"?"button":void 0,children:[C&&!N&&!S&&_?e.jsx(ws,{features:zs,children:e.jsx(Ss.span,{className:m.cursor({class:l?.cursor}),"data-slot":"cursor",layoutDependency:!1,layoutId:"cursor",transition:{type:"spring",bounce:.15,duration:.5},...j})}):null,e.jsx("div",{className:m.tabContent({class:l?.tabContent}),"data-slot":"tabContent",children:o.rendered})]})});os.displayName="HeroUI.Tab";var rt=os;function nt(t){var a;let[s,r]=_s(t.selectedKey,(a=t.defaultSelectedKey)!==null&&a!==void 0?a:null,t.onSelectionChange),n=f.useMemo(()=>s!=null?[s]:[],[s]),{collection:o,disabledKeys:d,selectionManager:l}=Bs({...t,selectionMode:"single",disallowEmptySelection:!0,allowDuplicateSelectionEvents:!0,selectedKeys:n,onSelectionChange:u=>{if(u==="all")return;var m;let j=(m=u.values().next().value)!==null&&m!==void 0?m:null;j===s&&t.onSelectionChange&&t.onSelectionChange(j),r(j)}}),c=s!=null?o.getItem(s):null;return{collection:o,disabledKeys:d,selectionManager:l,selectedKey:s,setSelectedKey:r,selectedItem:c}}function lt(t){var a,s;let r=nt({...t,onSelectionChange:t.onSelectionChange?c=>{var u;c!=null&&((u=t.onSelectionChange)===null||u===void 0||u.call(t,c))}:void 0,suppressTextValueWarning:!0,defaultSelectedKey:(s=(a=t.defaultSelectedKey)!==null&&a!==void 0?a:We(t.collection,t.disabledKeys?new Set(t.disabledKeys):new Set))!==null&&s!==void 0?s:void 0}),{selectionManager:n,collection:o,selectedKey:d}=r,l=f.useRef(d);return f.useEffect(()=>{let c=d;t.selectedKey==null&&(n.isEmpty||c==null||!o.getItem(c))&&(c=We(o,r.disabledKeys),c!=null&&n.setSelectedKeys([c])),(c!=null&&n.focusedKey==null||!n.isFocused&&c!==l.current)&&n.setFocusedKey(c),l.current=c}),{...r,isDisabled:t.isDisabled||!1}}function We(t,a){let s=null;if(t){var r,n,o,d;for(s=t.getFirstKey();s!=null&&(a.has(s)||!((n=t.getItem(s))===null||n===void 0||(r=n.props)===null||r===void 0)&&r.isDisabled)&&s!==t.getLastKey();)s=t.getKeyAfter(s);s!=null&&(a.has(s)||!((d=t.getItem(s))===null||d===void 0||(o=d.props)===null||o===void 0)&&o.isDisabled)&&s===t.getLastKey()&&(s=t.getFirstKey())}return s}function ot(t){var a,s,r;const n=Se(),[o,d]=_e(t,Ke.variantKeys),{ref:l,as:c,className:u,classNames:m,children:j,disableCursorAnimation:N,motionProps:S,isVertical:g=!1,shouldSelectOnPressUp:p=!0,destroyInactiveTabPanel:x=!0,...h}=o,i=c||"div",b=typeof i=="string",k=X(l),y=(s=(a=t?.disableAnimation)!=null?a:n?.disableAnimation)!=null?s:!1,R=lt({children:j,...h}),{tabListProps:C}=tt(h,R,k),w=f.useMemo(()=>Ke({...d,disableAnimation:y,...g?{placement:"start"}:{}}),[Pe(d),y,g]),A=O(m?.base,u),L=f.useMemo(()=>({state:R,slots:w,classNames:m,motionProps:S,disableAnimation:y,listRef:k,shouldSelectOnPressUp:p,disableCursorAnimation:N,isDisabled:t?.isDisabled}),[R,w,k,S,y,N,p,t?.isDisabled,m]),F=f.useCallback(T=>({"data-slot":"base",className:w.base({class:O(A,T?.className)}),...q(xe(h,{enabled:b}),T)}),[A,h,w]),M=(r=d.placement)!=null?r:g?"start":"top",D=f.useCallback(T=>({"data-slot":"tabWrapper",className:w.tabWrapper({class:O(m?.tabWrapper,T?.className)}),"data-placement":M,"data-vertical":g||M==="start"||M==="end"?"vertical":"horizontal"}),[m,w,M,g]),$=f.useCallback(T=>({ref:k,"data-slot":"tabList",className:w.tabList({class:O(m?.tabList,T?.className)}),...q(C,T)}),[k,C,m,w]);return{Component:i,domRef:k,state:R,values:L,destroyInactiveTabPanel:x,getBaseProps:F,getTabListProps:$,getWrapperProps:D}}var it=Y(function(a,s){const{Component:r,values:n,state:o,destroyInactiveTabPanel:d,getBaseProps:l,getTabListProps:c,getWrapperProps:u}=ot({...a,ref:s}),m=f.useId(),j=!a.disableAnimation&&!a.disableCursorAnimation,N={state:o,listRef:n.listRef,slots:n.slots,classNames:n.classNames,isDisabled:n.isDisabled,motionProps:n.motionProps,disableAnimation:n.disableAnimation,shouldSelectOnPressUp:n.shouldSelectOnPressUp,disableCursorAnimation:n.disableCursorAnimation},S=[...o.collection].map(p=>e.jsx(rt,{item:p,...N,...p.props},p.key)),g=e.jsxs(e.Fragment,{children:[e.jsx("div",{...l(),children:e.jsx(r,{...c(),children:j?e.jsx(Cs,{id:m,children:S}):S})}),[...o.collection].map(p=>e.jsx(at,{classNames:n.classNames,destroyInactiveTabPanel:d,slots:n.slots,state:n.state,tabKey:p.key},p.key))]});return"placement"in a||"isVertical"in a?e.jsx("div",{...u(),children:g}):g}),ct=it,dt=Ps,Ve=dt;const pe=t=>t.toLowerCase().startsWith("personality"),ut={max_turns_scenario:15,max_turns_task:4,sim_user_model_name:null,checker_model_name:null,default_model:"gpt-4o-mini"},mt=()=>Rs()(Ts((t,a)=>({config:null,isConfigLoading:!1,configError:null,scenarios:{},selectedScenarioName:null,selectedForRun:[],executions:{},currentRunId:null,isExecuting:!1,simulationConfig:ut,results:[],selectedResult:null,isResultsLoading:!1,viewMode:"summary",evalView:"scenarios",runHistory:{},selectedRunId:null,actions:{setConfig:s=>{t(r=>{r.config=s,r.isConfigLoading=!1,r.configError=null})},setConfigLoading:s=>{t(r=>{r.isConfigLoading=s})},setConfigError:s=>{t(r=>{r.configError=s,r.isConfigLoading=!1})},setScenario:(s,r)=>{t(n=>{n.scenarios[s]=r})},selectScenario:s=>{t(r=>{r.selectedScenarioName=s})},updateScenarioTask:(s,r,n)=>{t(o=>{const d=o.scenarios[s];d&&d.tasks[r]&&Object.assign(d.tasks[r],n)})},toggleScenarioForRun:s=>{t(r=>{const n=r.selectedForRun.indexOf(s);n===-1?r.selectedForRun.push(s):r.selectedForRun.splice(n,1)})},selectAllScenariosForRun:()=>{t(s=>{s.config&&(s.selectedForRun=s.config.available_scenarios.map(r=>r.name).filter(r=>!pe(r)))})},clearScenariosForRun:()=>{t(s=>{s.selectedForRun=[]})},startExecution:(s,r)=>{t(n=>{n.currentRunId=s,n.isExecuting=!0;for(const o of r)n.executions[o]={scenarioName:o,status:"queued",startTime:Date.now(),currentTurn:0,currentTaskIndex:0,currentTask:null,turns:[],error:null}})},handleProgressUpdate:s=>{t(r=>{const n=r.executions[s.scenario_name];if(n)switch(s.type){case"status":n.status=s.status,n.currentTurn=s.current_turn??0,n.currentTaskIndex=s.current_task_index??0,n.currentTask=s.current_task??null;break;case"turn":{const l={turn_index:s.turn_index,task_index:s.task_index,user_message:s.user_message,assistant_message:s.assistant_message,tool_calls:s.tool_calls,task_completed:s.task_completed,task_completed_reason:s.task_completed_reason};n.turns.push(l),n.currentTurn=s.turn_index,n.currentTaskIndex=s.task_index;break}case"task_complete":break;case"complete":n.status=s.status,Object.values(r.executions).every(l=>l.status==="completed"||l.status==="failed"||l.status==="timeout")&&(r.isExecuting=!1);break;case"error":n.status="failed",n.error=s.error,Object.values(r.executions).every(l=>l.status==="completed"||l.status==="failed"||l.status==="timeout")&&(r.isExecuting=!1);break}})},stopExecution:()=>{t(s=>{s.isExecuting=!1;for(const r of Object.values(s.executions))(r.status==="running"||r.status==="queued")&&(r.status="failed",r.error="Stopped by user")})},clearExecutions:()=>{t(s=>{s.executions={},s.currentRunId=null,s.isExecuting=!1})},setSimulationConfig:s=>{t(r=>{Object.assign(r.simulationConfig,s)})},setResults:s=>{t(r=>{r.results=s,r.isResultsLoading=!1})},setSelectedResult:s=>{t(r=>{r.selectedResult=s})},setResultsLoading:s=>{t(r=>{r.isResultsLoading=s})},addResult:s=>{t(r=>{r.results.unshift(s)})},setViewMode:s=>{t(r=>{r.viewMode=s})},setEvalView:s=>{t(r=>{r.evalView=s})},navigateToScenarioDetail:s=>{t(r=>{r.selectedScenarioName=s,r.evalView="scenario-detail"})},navigateToRunner:s=>{t(r=>{r.selectedScenarioName=s,r.evalView="runner",r.selectedRunId=null})},navigateBack:()=>{t(s=>{s.evalView="scenarios",s.selectedRunId=null})},selectRun:s=>{t(r=>{r.selectedRunId=s})},addToRunHistory:(s,r)=>{t(n=>{n.runHistory[s]||(n.runHistory[s]=[]),n.runHistory[s].unshift(r)})},loadMockData:()=>{t(s=>{s.config={available_scenarios:[{name:"Scenario 1",num_tasks:3},{name:"Scenario 2",num_tasks:2},{name:"Scenario 3",num_tasks:4},{name:"Scenario 4",num_tasks:3},{name:"Scenario 5",num_tasks:2},{name:"Scenario 6",num_tasks:5},{name:"Personality 1",num_tasks:0},{name:"Personality 2",num_tasks:0},{name:"Personality 3",num_tasks:0}],scenarios_dir:"/mock/scenarios"},s.isConfigLoading=!1,s.scenarios={"Scenario 1":{name:"Scenario 1",tasks:[{task:"Search for available rooms in Krakow",expected_result:"List of rooms",expected_tools:["search_rooms"]},{task:"Filter by deluxe rooms",expected_result:"Deluxe rooms only",expected_tools:["filter_rooms"]},{task:"Book a room",expected_result:"Confirmation",expected_tools:["book_room"]}]},"Scenario 2":{name:"Scenario 2",tasks:[{task:"Check weather",expected_result:"Weather info",expected_tools:["get_weather"]},{task:"Plan activities",expected_result:"Activity list",expected_tools:null}]}},s.executions={"Scenario 1":{scenarioName:"Scenario 1",status:"completed",startTime:Date.now()-6e4,currentTurn:3,currentTaskIndex:2,currentTask:null,turns:[{turn_index:0,task_index:0,user_message:"Can you check for available rooms in Krakow on June 1, 2025?",assistant_message:`Here are the available rooms in Krak贸w on June 1, 2025:

1. **Grand Hotel Krak贸w**
   - Room 102 (Standard): 350 PLN/night
   - Room 202 (Deluxe): 500 PLN/night

2. **Hotel Stary Krak贸w**
   - Room 12 (Standard): 320 PLN/night
   - Room 22 (Deluxe): 480 PLN/night

Would you like to book any of these rooms?`,tool_calls:[{name:"search_available_rooms",arguments:{city:"Krakow",date:"2025-06-01"},result:{}}],task_completed:!0,task_completed_reason:"Listed available rooms successfully"},{turn_index:1,task_index:1,user_message:"Show me only the deluxe rooms please.",assistant_message:`Here are the deluxe rooms available:

1. **Grand Hotel Krak贸w - Room 202**
   - Price: 500 PLN/night
   - Capacity: 3 guests
   - Amenities: WiFi, TV, AC, Balcony, City View

2. **Hotel Stary Krak贸w - Room 22**
   - Price: 480 PLN/night
   - Capacity: 3 guests
   - Amenities: WiFi, TV, AC, City View, Minibar`,tool_calls:[{name:"filter_rooms",arguments:{type:"deluxe"},result:{}}],task_completed:!0,task_completed_reason:"Filtered to show only deluxe rooms"},{turn_index:2,task_index:2,user_message:"I'd like to book Room 22 at Hotel Stary for John Doe.",assistant_message:`Your reservation has been confirmed!

**Booking Details:**
- Guest: John Doe
- Hotel: Hotel Stary Krak贸w
- Room: 22 (Deluxe)
- Date: June 1, 2025
- Total: 480 PLN

Confirmation number: HSK-2025-1234`,tool_calls:[{name:"book_room",arguments:{hotel:"Hotel Stary",room:22,guest:"John Doe"},result:{confirmation:"HSK-2025-1234"}}],task_completed:!0,task_completed_reason:"Room booked successfully"}],error:null},"Scenario 2":{scenarioName:"Scenario 2",status:"completed",startTime:Date.now()-3e4,currentTurn:2,currentTaskIndex:1,currentTask:null,turns:[{turn_index:0,task_index:0,user_message:"What's the weather like in Warsaw today?",assistant_message:`The weather in Warsaw today:

- Temperature: 22掳C
- Conditions: Partly cloudy
- Humidity: 65%
- Wind: 10 km/h NW

It's a pleasant day for outdoor activities!`,tool_calls:[{name:"get_weather",arguments:{city:"Warsaw"},result:{}}],task_completed:!0,task_completed_reason:"Weather information provided"},{turn_index:1,task_index:1,user_message:"What activities do you recommend?",assistant_message:`Based on the weather, here are some recommendations:

1. Visit the Old Town and Royal Castle
2. Walk through azienki Park
3. Explore the Warsaw Uprising Museum
4. Enjoy a riverbank cafe by the Vistula

The partly cloudy weather is perfect for sightseeing!`,tool_calls:[],task_completed:!0,task_completed_reason:"Activities recommended"}],error:null},"Scenario 3":{scenarioName:"Scenario 3",status:"timeout",startTime:Date.now()-12e4,currentTurn:2,currentTaskIndex:1,currentTask:"Complete task 2",turns:[{turn_index:0,task_index:0,user_message:"Start the process",assistant_message:"Starting the process now...",tool_calls:[],task_completed:!0,task_completed_reason:"Process started"}],error:"Scenario timed out after 15 turns"}},s.selectedScenarioName="Scenario 1",s.runHistory={"Scenario 1":[{runId:"run-001",scenarioName:"Scenario 1",timestamp:Date.now()-6e4,status:"completed",execution:s.executions["Scenario 1"]},{runId:"run-002",scenarioName:"Scenario 1",timestamp:Date.now()-36e5,status:"failed",execution:{scenarioName:"Scenario 1",status:"failed",startTime:Date.now()-36e5,currentTurn:1,currentTaskIndex:0,currentTask:null,turns:[{turn_index:0,task_index:0,user_message:"Can you check for available rooms?",assistant_message:"I encountered an error while searching.",tool_calls:[],task_completed:!1,task_completed_reason:"API error"}],error:"Connection timeout"}}]}})}}}))),be=t=>{const a=Object.values(t.executions),s=a.length,r=a.filter(l=>l.status==="completed").length,n=a.filter(l=>l.status==="failed"||l.status==="timeout").length,o=a.filter(l=>l.status==="running"||l.status==="queued").length,d=s>0?(r+n)/s*100:0;return{total:s,completed:r,failed:n,running:o,percentage:d}},Te=f.createContext(null);function xt({children:t}){const a=f.useRef(null);return a.current||(a.current=mt()),e.jsx(Te.Provider,{value:a.current,children:t})}function P(t){const a=f.useContext(Te);if(!a)throw new Error("useEvalStore must be used within EvalStoreProvider");return Ds(a,t)}function Q(){const t=f.useContext(Te);if(!t)throw new Error("useEvalStoreApi must be used within EvalStoreProvider");return t}const ht={idle:{color:"default",icon:"heroicons:minus",label:"Idle"},queued:{color:"primary",icon:"heroicons:clock",label:"Queued"},running:{color:"primary",icon:"heroicons:arrow-path",label:"Running"},completed:{color:"success",icon:"heroicons:check",label:"Completed"},failed:{color:"danger",icon:"heroicons:x-mark",label:"Failed"},timeout:{color:"warning",icon:"heroicons:clock",label:"Timeout"}};function Oe({name:t,scenario:a,execution:s,isSelected:r,isSelectedForRun:n,onSelect:o,onToggleForRun:d,onViewDetails:l,onRun:c,isRunnable:u=!0}){const m=s?.status??"idle",j=ht[m];return e.jsx(V,{isPressable:!0,onPress:o,className:Ee("transition-all",r&&"ring-2 ring-primary",n&&"bg-primary-50 dark:bg-primary-900/20"),children:e.jsxs(W,{className:"gap-2 p-3",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[u&&e.jsx(Xe,{size:"sm",isSelected:n,onValueChange:()=>d?.(),onClick:N=>N.stopPropagation(),className:"mt-0.5"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-medium text-foreground truncate",children:t}),a?e.jsxs("p",{className:"text-xs text-foreground-500",children:[a.tasks.length," task",a.tasks.length!==1?"s":""]}):e.jsx($s,{className:"h-3 w-16 rounded mt-1"})]}),e.jsx(I,{size:"sm",color:j.color,variant:"flat",startContent:e.jsx(v,{icon:j.icon,className:Ee("text-sm",m==="running"&&"animate-spin")}),children:j.label})]}),s&&m==="running"&&e.jsxs("div",{className:"mt-1",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs text-foreground-500",children:[e.jsxs("span",{children:["Turn ",s.currentTurn]}),e.jsxs("span",{children:["Task ",s.currentTaskIndex+1]})]}),s.currentTask&&e.jsx("p",{className:"text-xs text-foreground-400 truncate mt-1",children:s.currentTask})]}),s&&m==="failed"&&s.error&&e.jsx("p",{className:"text-xs text-danger mt-1 line-clamp-2",children:s.error}),s&&m==="completed"&&e.jsxs("div",{className:"flex items-center gap-2 text-xs text-foreground-500 mt-1",children:[e.jsxs("span",{children:[s.turns.length," turns"]}),e.jsx("span",{children:"|"}),e.jsxs("span",{children:[s.turns.filter(N=>N.task_completed).length," tasks done"]})]}),u&&e.jsxs("div",{className:"flex items-center gap-1 mt-2 pt-2 border-t border-divider",children:[e.jsxs("button",{onClick:N=>{N.stopPropagation(),l?.()},className:"flex-1 flex items-center justify-center gap-1 px-2 py-1 text-xs text-foreground-500 hover:text-foreground hover:bg-default-100 rounded transition-colors",children:[e.jsx(v,{icon:"heroicons:document-text",className:"text-sm"}),"Details"]}),e.jsxs("button",{onClick:N=>{N.stopPropagation(),c?.()},className:"flex-1 flex items-center justify-center gap-1 px-2 py-1 text-xs text-primary hover:bg-primary-100 rounded transition-colors",children:[e.jsx(v,{icon:"heroicons:play",className:"text-sm"}),"Run"]})]})]})})}function ft(){const{client:t}=ve(),a=Q(),s=P(i=>i.config),r=P(i=>i.scenarios),n=P(i=>i.selectedScenarioName),o=P(i=>i.selectedForRun),d=P(i=>i.executions),l=f.useRef(!1),c=f.useCallback(i=>{a.getState().actions.selectScenario(i)},[a]),u=f.useCallback(i=>{a.getState().actions.toggleScenarioForRun(i)},[a]),m=f.useCallback(()=>{a.getState().actions.selectAllScenariosForRun()},[a]),j=f.useCallback(()=>{a.getState().actions.clearScenariosForRun()},[a]),N=f.useCallback(i=>{a.getState().actions.navigateToScenarioDetail(i)},[a]),S=f.useCallback(i=>{a.getState().actions.navigateToRunner(i)},[a]);f.useEffect(()=>{if(!s||l.current)return;l.current=!0;async function i(){const{setScenario:b}=a.getState().actions;for(const k of s.available_scenarios)try{const y=await t.makeRequest(`/api/eval/scenarios/${k.name}`);b(k.name,y)}catch(y){console.error(`Failed to load scenario ${k.name}:`,y)}}i()},[t,s,a]);const{runnableScenarios:g,personalityScenarios:p}=f.useMemo(()=>{if(!s)return{runnableScenarios:[],personalityScenarios:[]};const i=s.available_scenarios.map(b=>b.name);return{runnableScenarios:i.filter(b=>!pe(b)),personalityScenarios:i.filter(b=>pe(b))}},[s]),x=g.length>0&&g.every(i=>o.includes(i)),h=o.length>0&&!x;return s?g.length===0&&p.length===0?e.jsxs("div",{className:"flex h-full flex-col items-center justify-center p-6 text-center",children:[e.jsx("div",{className:"text-4xl mb-4",children:""}),e.jsx("p",{className:"text-foreground-500",children:"No scenarios found"}),e.jsx("p",{className:"text-xs text-foreground-400 mt-2",children:"Add scenario JSON files to the scenarios directory"})]}):e.jsxs("div",{className:"flex flex-col gap-2 p-4",children:[g.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("h2",{className:"text-sm font-semibold text-foreground-500 uppercase tracking-wide",children:["Scenarios (",g.length,")"]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(Xe,{size:"sm",isSelected:x,isIndeterminate:h,onValueChange:()=>{x?j():m()},children:e.jsx("span",{className:"text-xs",children:"All"})})})]}),g.map(i=>e.jsx(Oe,{name:i,scenario:r[i],execution:d[i],isSelected:n===i,isSelectedForRun:o.includes(i),onSelect:()=>c(i),onToggleForRun:()=>u(i),onViewDetails:()=>N(i),onRun:()=>S(i),isRunnable:!0},i))]}),p.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("h2",{className:"text-sm font-semibold text-foreground-500 uppercase tracking-wide mt-4 mb-2",children:["Personalities (",p.length,")"]}),e.jsx("p",{className:"text-xs text-foreground-400 mb-2",children:"Used as simulated user profiles during scenario runs"}),p.map(i=>e.jsx(Oe,{name:i,scenario:r[i],execution:d[i],isSelected:n===i,isSelectedForRun:!1,onSelect:()=>c(i),isRunnable:!1},i))]})]}):e.jsx("div",{className:"flex h-full items-center justify-center",children:e.jsx(Qe,{size:"sm"})})}function gt(){const{client:t}=ve(),a=Q(),s=P(x=>x.config),r=P(x=>x.isExecuting),n=P(x=>x.executions),o=P(x=>x.selectedForRun),d=f.useMemo(()=>be({executions:n}),[n]),l=f.useMemo(()=>s?s.available_scenarios.map(x=>x.name).filter(x=>!pe(x)):[],[s]),c=f.useCallback(async x=>{const h=a.getState().isExecuting,i=a.getState().simulationConfig;if(!(x.length===0||h))try{const b=await fetch(`${t.getBaseUrl()}/api/eval/run`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({scenario_names:x,config:i})});if(!b.ok)throw new Error(`Failed to start evaluation: ${b.statusText}`);const y=(await b.json()).run_id;a.getState().actions.startExecution(y,x);const R=new EventSource(`${t.getBaseUrl()}/api/eval/progress/${y}`);R.onmessage=C=>{try{const w=JSON.parse(C.data);a.getState().actions.handleProgressUpdate(w),(w.type==="complete"||w.type==="error")&&be(a.getState()).running===0&&R.close()}catch(w){console.error("Failed to parse progress update:",w)}},R.onerror=()=>{R.close()}}catch(b){console.error("Failed to start evaluation:",b)}},[t,a]),u=f.useCallback(()=>{const x=a.getState().selectedForRun;c(x)},[c,a]),m=f.useCallback(()=>{c(l)},[c,l]),j=f.useCallback(()=>{a.getState().actions.stopExecution()},[a]),N=f.useCallback(()=>{a.getState().actions.clearExecutions()},[a]),S=l.length>0,g=o.length>0,p=d.total>0;return e.jsxs("div",{className:"flex items-center justify-between gap-4 border-b border-divider px-6 py-3",children:[e.jsx("div",{className:"flex items-center gap-4 flex-1",children:p?e.jsxs(e.Fragment,{children:[e.jsx(rs,{"aria-label":"Execution progress",value:d.percentage,className:"max-w-xs",color:d.failed>0?"warning":"primary",size:"sm"}),e.jsxs("div",{className:"flex items-center gap-2",children:[d.completed>0&&e.jsxs(I,{size:"sm",color:"success",variant:"flat",children:[d.completed," completed"]}),d.failed>0&&e.jsxs(I,{size:"sm",color:"danger",variant:"flat",children:[d.failed," failed"]}),d.running>0&&e.jsxs(I,{size:"sm",color:"primary",variant:"flat",children:[d.running," running"]})]})]}):e.jsx("p",{className:"text-sm text-foreground-500",children:g?`${o.length} scenario${o.length!==1?"s":""} selected`:S?`${l.length} scenarios available`:"No scenarios loaded"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[r?e.jsx(K,{color:"danger",variant:"flat",onPress:j,startContent:e.jsx(v,{icon:"heroicons:stop"}),children:"Stop All"}):e.jsxs(e.Fragment,{children:[g&&e.jsxs(K,{color:"primary",onPress:u,startContent:e.jsx(v,{icon:"heroicons:play"}),children:["Run Selected (",o.length,")"]}),e.jsx(K,{color:g?"default":"primary",variant:g?"flat":"solid",onPress:m,isDisabled:!S,startContent:e.jsx(v,{icon:"heroicons:play"}),children:"Run All"})]}),p&&!r&&e.jsx(K,{variant:"light",onPress:N,startContent:e.jsx(v,{icon:"heroicons:trash"}),children:"Clear"})]})]})}function pt({scenarioName:t}){const a=P(r=>t?r.executions[t]:null),s=P(r=>t?r.scenarios[t]:null);return t?!a||a.turns.length===0?e.jsxs("div",{className:"flex h-full flex-col items-center justify-center p-8 text-center",children:[e.jsx(v,{icon:"heroicons:clock",className:"text-6xl text-foreground-300 mb-4"}),e.jsx("h2",{className:"text-lg font-medium text-foreground",children:a?"No Turns Yet":"Not Started"}),e.jsx("p",{className:"text-sm text-foreground-500 mt-2",children:a?"Waiting for conversation turns...":"Run the scenario to see the conversation"})]}):e.jsx(je,{className:"h-full",children:e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-foreground",children:t}),s&&e.jsxs("p",{className:"text-sm text-foreground-500",children:[s.tasks.length," tasks |"," ",a.turns.filter(r=>r.task_completed).length," completed"]})]}),a.turns.map((r,n)=>e.jsxs("div",{className:"space-y-3",children:[(n===0||r.task_index!==a.turns[n-1].task_index)&&e.jsxs("div",{className:"flex items-center gap-2 py-2",children:[e.jsx(ae,{className:"flex-1"}),e.jsxs(I,{size:"sm",variant:"flat",color:"primary",children:["Task ",r.task_index+1,s?.tasks[r.task_index]&&e.jsxs("span",{className:"ml-1 opacity-70",children:[": ",s.tasks[r.task_index].task.slice(0,30),"..."]})]}),e.jsx(ae,{className:"flex-1"})]}),e.jsx(V,{className:"ml-8 bg-primary-50 dark:bg-primary-900/20",children:e.jsx(W,{className:"p-3",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-primary flex items-center justify-center flex-shrink-0",children:e.jsx(v,{icon:"heroicons:user",className:"text-white text-sm"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs text-foreground-500 mb-1",children:"Simulated User"}),e.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none",children:e.jsx(he,{remarkPlugins:[fe],children:r.user_message})})]})]})})}),e.jsx(V,{className:"mr-8",children:e.jsx(W,{className:"p-3",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-success flex items-center justify-center flex-shrink-0",children:e.jsx(v,{icon:"heroicons:cpu-chip",className:"text-white text-sm"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs text-foreground-500 mb-1",children:"Assistant"}),e.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none",children:e.jsx(he,{remarkPlugins:[fe],children:r.assistant_message})}),r.tool_calls.length>0&&e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsx("p",{className:"text-xs text-foreground-500",children:"Tools Used:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:r.tool_calls.map((o,d)=>e.jsx(I,{size:"sm",variant:"flat",children:o.name},d))})]})]})]})})}),r.task_completed&&e.jsx("div",{className:"flex items-center justify-center gap-2 py-2",children:e.jsxs(I,{size:"sm",color:"success",variant:"flat",startContent:e.jsx(v,{icon:"heroicons:check"}),children:["Task Completed: ",r.task_completed_reason]})})]},n)),a.status==="running"&&e.jsxs("div",{className:"flex items-center justify-center gap-2 py-4",children:[e.jsx(v,{icon:"heroicons:arrow-path",className:"animate-spin text-primary"}),e.jsxs("span",{className:"text-sm text-foreground-500",children:["Processing turn ",a.currentTurn+1,"..."]})]}),a.status==="completed"&&e.jsx("div",{className:"flex items-center justify-center gap-2 py-4",children:e.jsx(I,{color:"success",variant:"flat",startContent:e.jsx(v,{icon:"heroicons:check"}),children:"Scenario Completed"})}),a.status==="failed"&&e.jsxs("div",{className:"flex flex-col items-center justify-center gap-2 py-4",children:[e.jsx(I,{color:"danger",variant:"flat",startContent:e.jsx(v,{icon:"heroicons:x-mark"}),children:"Scenario Failed"}),a.error&&e.jsx("p",{className:"text-sm text-danger",children:a.error})]})]})}):e.jsxs("div",{className:"flex h-full flex-col items-center justify-center p-8 text-center",children:[e.jsx(v,{icon:"heroicons:chat-bubble-left-right",className:"text-6xl text-foreground-300 mb-4"}),e.jsx("h2",{className:"text-lg font-medium text-foreground",children:"Select a Scenario"}),e.jsx("p",{className:"text-sm text-foreground-500 mt-2",children:"Click on a scenario to view its conversation"})]})}function bt(){const t=Q(),a=P(l=>l.executions),s=f.useMemo(()=>be({executions:a}),[a]),r=f.useCallback(l=>{const{selectScenario:c,setViewMode:u}=t.getState().actions;c(l),u("conversation")},[t]),n=Object.values(a);if(n.length===0)return e.jsxs("div",{className:"flex h-full flex-col items-center justify-center p-8 text-center",children:[e.jsx(v,{icon:"heroicons:chart-bar",className:"text-6xl text-foreground-300 mb-4"}),e.jsx("h2",{className:"text-lg font-medium text-foreground",children:"No Results Yet"}),e.jsx("p",{className:"text-sm text-foreground-500 mt-2",children:"Run scenarios to see results here"})]});const o=n.reduce((l,c)=>l+c.turns.length,0),d=n.reduce((l,c)=>l+c.turns.filter(u=>u.task_completed).length,0);return e.jsx(je,{className:"h-full",children:e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs(V,{children:[e.jsx(Gs,{className:"pb-2",children:e.jsx("h3",{className:"text-lg font-semibold",children:"Overall Progress"})}),e.jsxs(W,{className:"gap-4",children:[e.jsx(rs,{"aria-label":"Overall progress",value:s.percentage,color:s.failed>0?"warning":"primary",showValueLabel:!0,className:"max-w-full"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-foreground",children:s.total}),e.jsx("p",{className:"text-xs text-foreground-500",children:"Total Scenarios"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-success",children:s.completed}),e.jsx("p",{className:"text-xs text-foreground-500",children:"Completed"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-foreground",children:o}),e.jsx("p",{className:"text-xs text-foreground-500",children:"Total Turns"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-foreground",children:d}),e.jsx("p",{className:"text-xs text-foreground-500",children:"Tasks Completed"})]})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.map(l=>e.jsx(V,{isPressable:!0,onPress:()=>r(l.scenarioName),className:"hover:border-primary transition-colors",children:e.jsxs(W,{className:"gap-3",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx("h4",{className:"font-medium text-foreground truncate flex-1",children:l.scenarioName}),e.jsx(vt,{status:l.status})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-foreground-500",children:[e.jsx(v,{icon:"heroicons:chat-bubble-left-right",className:"text-lg"}),e.jsxs("span",{children:[l.turns.length," turns"]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-foreground-500",children:[e.jsx(v,{icon:"heroicons:check",className:"text-lg"}),e.jsxs("span",{children:[l.turns.filter(c=>c.task_completed).length," tasks"]})]})]}),l.error&&e.jsx("p",{className:"text-xs text-danger line-clamp-2",children:l.error}),l.status==="running"&&e.jsxs("div",{className:"flex items-center gap-2 text-xs text-primary",children:[e.jsx(v,{icon:"heroicons:arrow-path",className:"animate-spin"}),e.jsxs("span",{children:["Turn ",l.currentTurn," | Task"," ",l.currentTaskIndex+1]})]})]})},l.scenarioName))})]})})}function vt({status:t}){const a={idle:{color:"default",label:"Idle"},queued:{color:"primary",label:"Queued"},running:{color:"primary",label:"Running"},completed:{color:"success",label:"Done"},failed:{color:"danger",label:"Failed"},timeout:{color:"warning",label:"Timeout"}},{color:s,label:r}=a[t]??a.idle;return e.jsx(I,{size:"sm",color:s,variant:"flat",children:r})}function jt(){const t=Q(),a=P(n=>n.viewMode),s=P(n=>n.selectedScenarioName),r=f.useCallback(n=>{t.getState().actions.setViewMode(n)},[t]);return e.jsxs("div",{className:"flex h-full min-h-0 flex-col",children:[e.jsx("div",{className:"border-b border-divider px-4 py-2",children:e.jsxs(ct,{selectedKey:a,onSelectionChange:r,size:"sm",variant:"underlined",children:[e.jsx(Ve,{title:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(v,{icon:"heroicons:chart-bar"}),e.jsx("span",{children:"Summary"})]})},"summary"),e.jsx(Ve,{title:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(v,{icon:"heroicons:chat-bubble-left-right"}),e.jsx("span",{children:"Conversation"})]})},"conversation")]})}),e.jsx("div",{className:"flex-1 min-h-0 overflow-hidden",children:a==="summary"?e.jsx(bt,{}):e.jsx(pt,{scenarioName:s})})]})}function yt(){const t=Q(),a=P(x=>x.selectedScenarioName),s=P(x=>x.scenarios),r=P(x=>x.runHistory),n=a?s[a]:null,o=a?r[a]:null,[d,l]=f.useState(null),[c,u]=f.useState(null),m=f.useCallback(()=>{t.getState().actions.navigateBack()},[t]),j=f.useCallback(()=>{a&&t.getState().actions.navigateToRunner(a)},[t,a]),N=(x,h)=>{l(x),u({...h})},S=()=>{d!==null&&c&&a&&(t.getState().actions.updateScenarioTask(a,d,c),l(null),u(null))},g=()=>{l(null),u(null)};if(!a||!n)return e.jsx("div",{className:"flex h-full items-center justify-center",children:e.jsx("p",{className:"text-foreground-500",children:"No scenario selected"})});const p=o?.[0];return e.jsxs("div",{className:"flex h-full flex-col",children:[e.jsx("div",{className:"border-b border-divider px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(K,{isIconOnly:!0,variant:"light",onPress:m,"aria-label":"Go back",children:e.jsx(v,{icon:"heroicons:arrow-left",className:"text-xl"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-xl font-semibold text-foreground",children:n.name}),e.jsxs("p",{className:"text-sm text-foreground-500",children:[n.tasks.length," task",n.tasks.length!==1?"s":""]})]}),e.jsx(K,{color:"primary",startContent:e.jsx(v,{icon:"heroicons:play"}),onPress:j,children:"Run Scenario"})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsx(V,{className:"flex-1",children:e.jsxs(W,{className:"flex flex-row items-center gap-3 p-4",children:[e.jsx("div",{className:"rounded-lg bg-primary-100 dark:bg-primary-900/30 p-2",children:e.jsx(v,{icon:"heroicons:clipboard-document-list",className:"text-xl text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-foreground-500",children:"Tasks"}),e.jsx("p",{className:"text-lg font-semibold",children:n.tasks.length})]})]})}),e.jsx(V,{className:"flex-1",children:e.jsxs(W,{className:"flex flex-row items-center gap-3 p-4",children:[e.jsx("div",{className:"rounded-lg bg-success-100 dark:bg-success-900/30 p-2",children:e.jsx(v,{icon:"heroicons:clock",className:"text-xl text-success"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-foreground-500",children:"Last Run"}),e.jsx("p",{className:"text-lg font-semibold",children:p?new Date(p.timestamp).toLocaleDateString():"Never"})]})]})}),e.jsx(V,{className:"flex-1",children:e.jsxs(W,{className:"flex flex-row items-center gap-3 p-4",children:[e.jsx("div",{className:"rounded-lg bg-warning-100 dark:bg-warning-900/30 p-2",children:e.jsx(v,{icon:"heroicons:chart-bar",className:"text-xl text-warning"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-foreground-500",children:"Total Runs"}),e.jsx("p",{className:"text-lg font-semibold",children:o?.length??0})]})]})})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Tasks"}),e.jsx("div",{className:"space-y-4",children:n.tasks.map((x,h)=>e.jsx(V,{children:e.jsx(W,{className:"p-4",children:d===h?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm font-medium text-foreground-500",children:["Task ",h+1]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(K,{size:"sm",variant:"flat",onPress:g,children:"Cancel"}),e.jsx(K,{size:"sm",color:"primary",onPress:S,children:"Save"})]})]}),e.jsx(Is,{label:"Task Description",value:c?.task??"",onValueChange:i=>u(b=>b?{...b,task:i}:null),minRows:2}),e.jsx(Ae,{label:"Expected Result",value:c?.expected_result??"",onValueChange:i=>u(b=>b?{...b,expected_result:i}:null)}),e.jsx(Ae,{label:"Expected Tools (comma-separated)",value:c?.expected_tools?.join(", ")??"",onValueChange:i=>u(b=>b?{...b,expected_tools:i?i.split(",").map(k=>k.trim()):null}:null)})]}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"flex items-center gap-2 mb-2",children:e.jsxs(I,{size:"sm",variant:"flat",color:"primary",children:["Task ",h+1]})}),e.jsx("p",{className:"text-foreground",children:x.task})]}),e.jsx(K,{isIconOnly:!0,size:"sm",variant:"light",onPress:()=>N(h,x),"aria-label":"Edit task",children:e.jsx(v,{icon:"heroicons:pencil"})})]}),e.jsx(ae,{className:"my-3"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-foreground-500 mb-1",children:"Expected Result"}),e.jsx("p",{className:"text-foreground",children:x.expected_result})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-foreground-500 mb-1",children:"Expected Tools"}),x.expected_tools?e.jsx("div",{className:"flex flex-wrap gap-1",children:x.expected_tools.map((i,b)=>e.jsx(I,{size:"sm",variant:"flat",children:i},b))}):e.jsx("p",{className:"text-foreground-400 italic",children:"None specified"})]})]})]})})},h))})]}),o&&o.length>0&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Recent Runs"}),e.jsx("div",{className:"space-y-2",children:o.slice(0,5).map(x=>e.jsx(V,{isPressable:!0,onPress:()=>{t.getState().actions.selectRun(x.runId),t.getState().actions.navigateToRunner(x.scenarioName)},children:e.jsxs(W,{className:"flex flex-row items-center justify-between p-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(I,{size:"sm",color:x.status==="completed"?"success":x.status==="failed"?"danger":x.status==="timeout"?"warning":"default",variant:"flat",children:x.status}),e.jsx("span",{className:"text-sm text-foreground",children:new Date(x.timestamp).toLocaleString()})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-foreground-500",children:[e.jsxs("span",{children:[x.execution.turns.length," turns"]}),e.jsx(v,{icon:"heroicons:chevron-right"})]})]})},x.runId))})]})]})})]})}const Be=[];function Nt(){const{client:t}=ve(),a=Q(),s=P(h=>h.selectedScenarioName),r=P(h=>h.scenarios),n=P(h=>h.runHistory),o=P(h=>h.selectedRunId),d=P(h=>h.isExecuting),l=P(h=>h.executions),c=s?r[s]:null,u=s?n[s]??Be:Be,m=s?l[s]:null,j=f.useMemo(()=>o?u.find(i=>i.runId===o)?.execution??null:m,[o,u,m]),N=f.useCallback(()=>{a.getState().actions.navigateBack()},[a]),S=f.useCallback(()=>{s&&a.getState().actions.navigateToScenarioDetail(s)},[a,s]),g=f.useCallback(h=>{a.getState().actions.selectRun(h)},[a]),p=f.useCallback(async()=>{if(!s||d)return;const h=a.getState().simulationConfig;try{const i=await fetch(`${t.getBaseUrl()}/api/eval/run`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({scenario_names:[s],config:h})});if(!i.ok)throw new Error(`Failed to start evaluation: ${i.statusText}`);const k=(await i.json()).run_id;a.getState().actions.selectRun(null),a.getState().actions.startExecution(k,[s]);const y=new EventSource(`${t.getBaseUrl()}/api/eval/progress/${k}`);y.onmessage=R=>{try{const C=JSON.parse(R.data);if(a.getState().actions.handleProgressUpdate(C),C.type==="complete"||C.type==="error"){const w=a.getState().executions[s];if(w){const L={runId:k,scenarioName:s,timestamp:Date.now(),status:w.status,execution:{...w}};a.getState().actions.addToRunHistory(s,L)}be(a.getState()).running===0&&y.close()}}catch(C){console.error("Failed to parse progress update:",C)}},y.onerror=()=>{y.close()}}catch(i){console.error("Failed to start evaluation:",i)}},[t,a,s,d]),x=f.useCallback(()=>{a.getState().actions.stopExecution()},[a]);return!s||!c?e.jsx("div",{className:"flex h-full items-center justify-center",children:e.jsx("p",{className:"text-foreground-500",children:"No scenario selected"})}):e.jsxs("div",{className:"flex h-full",children:[e.jsxs("aside",{className:"w-72 flex-shrink-0 border-r border-divider flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b border-divider",children:[e.jsx("h2",{className:"font-semibold text-foreground",children:"Run History"}),e.jsxs("p",{className:"text-xs text-foreground-500 mt-1",children:[u.length," previous run",u.length!==1?"s":""]})]}),e.jsx(je,{className:"flex-1",children:e.jsxs("div",{className:"p-2 space-y-2",children:[m&&e.jsx(V,{isPressable:!0,onPress:()=>g(null),className:o?"":"ring-2 ring-primary",children:e.jsxs(W,{className:"p-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ze,{status:m.status}),e.jsx("span",{className:"text-xs text-foreground-500",children:"Current"})]}),m.status==="running"&&e.jsx(v,{icon:"heroicons:arrow-path",className:"animate-spin text-primary text-sm"})]}),e.jsxs("p",{className:"text-xs text-foreground-400 mt-1",children:[m.turns.length," turns"]})]})}),u.map(h=>e.jsx(V,{isPressable:!0,onPress:()=>g(h.runId),className:o===h.runId?"ring-2 ring-primary":"",children:e.jsxs(W,{className:"p-3",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx(ze,{status:h.status})}),e.jsx("p",{className:"text-xs text-foreground mt-2",children:new Date(h.timestamp).toLocaleString()}),e.jsxs("p",{className:"text-xs text-foreground-400",children:[h.execution.turns.length," turns"]})]})},h.runId)),u.length===0&&!m&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(v,{icon:"heroicons:clock",className:"text-4xl text-foreground-300 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-foreground-500",children:"No runs yet"}),e.jsx("p",{className:"text-xs text-foreground-400 mt-1",children:"Run the scenario to see results"})]})]})})]}),e.jsxs("div",{className:"flex-1 flex flex-col min-w-0",children:[e.jsx("div",{className:"border-b border-divider px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(K,{isIconOnly:!0,variant:"light",onPress:N,"aria-label":"Go back to scenarios",children:e.jsx(v,{icon:"heroicons:arrow-left",className:"text-xl"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-xl font-semibold text-foreground",children:c.name}),e.jsxs("p",{className:"text-sm text-foreground-500",children:[c.tasks.length," tasks"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(K,{variant:"flat",onPress:S,startContent:e.jsx(v,{icon:"heroicons:document-text"}),children:"View Details"}),d?e.jsx(K,{color:"danger",variant:"flat",onPress:x,startContent:e.jsx(v,{icon:"heroicons:stop"}),children:"Stop"}):e.jsx(K,{color:"primary",onPress:p,startContent:e.jsx(v,{icon:"heroicons:play"}),children:"Run"})]})]})}),e.jsx("div",{className:"flex-1 min-h-0 overflow-hidden",children:j?e.jsx(kt,{execution:j,scenario:c}):e.jsxs("div",{className:"flex h-full flex-col items-center justify-center p-8 text-center",children:[e.jsx(v,{icon:"heroicons:play-circle",className:"text-6xl text-foreground-300 mb-4"}),e.jsx("h2",{className:"text-lg font-medium text-foreground",children:"Ready to Run"}),e.jsx("p",{className:"text-sm text-foreground-500 mt-2",children:'Click "Run" to start the scenario evaluation'})]})})]})]})}function ze({status:t}){const a={completed:{color:"success",label:"Completed"},failed:{color:"danger",label:"Failed"},timeout:{color:"warning",label:"Timeout"},running:{color:"primary",label:"Running"},queued:{color:"primary",label:"Queued"},idle:{color:"default",label:"Idle"}},{color:s,label:r}=a[t]??{color:"default",label:t};return e.jsx(I,{size:"sm",color:s,variant:"flat",children:r})}function kt({execution:t,scenario:a}){return t.turns.length===0?e.jsxs("div",{className:"flex h-full flex-col items-center justify-center p-8 text-center",children:[e.jsx(v,{icon:"heroicons:clock",className:"text-6xl text-foreground-300 mb-4"}),e.jsx("h2",{className:"text-lg font-medium text-foreground",children:t.status==="running"||t.status==="queued"?"Starting...":"No Turns"}),e.jsx("p",{className:"text-sm text-foreground-500 mt-2",children:t.status==="running"||t.status==="queued"?"Waiting for first turn...":"No conversation recorded"})]}):e.jsx(je,{className:"h-full",children:e.jsxs("div",{className:"p-6 space-y-4",children:[t.turns.map((s,r)=>e.jsxs("div",{className:"space-y-3",children:[(r===0||s.task_index!==t.turns[r-1].task_index)&&e.jsxs("div",{className:"flex items-center gap-2 py-2",children:[e.jsx(ae,{className:"flex-1"}),e.jsxs(I,{size:"sm",variant:"flat",color:"primary",children:["Task ",s.task_index+1,a?.tasks[s.task_index]&&e.jsxs("span",{className:"ml-1 opacity-70",children:[": ",a.tasks[s.task_index].task.slice(0,30),"..."]})]}),e.jsx(ae,{className:"flex-1"})]}),e.jsx(V,{className:"ml-8 bg-primary-50 dark:bg-primary-900/20",children:e.jsx(W,{className:"p-3",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-primary flex items-center justify-center flex-shrink-0",children:e.jsx(v,{icon:"heroicons:user",className:"text-white text-sm"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs text-foreground-500 mb-1",children:"Simulated User"}),e.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none",children:e.jsx(he,{remarkPlugins:[fe],children:s.user_message})})]})]})})}),e.jsx(V,{className:"mr-8",children:e.jsx(W,{className:"p-3",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-success flex items-center justify-center flex-shrink-0",children:e.jsx(v,{icon:"heroicons:cpu-chip",className:"text-white text-sm"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs text-foreground-500 mb-1",children:"Assistant"}),e.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none",children:e.jsx(he,{remarkPlugins:[fe],children:s.assistant_message})}),s.tool_calls.length>0&&e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsx("p",{className:"text-xs text-foreground-500",children:"Tools Used:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:s.tool_calls.map((n,o)=>e.jsx(I,{size:"sm",variant:"flat",children:n.name},o))})]})]})]})})}),s.task_completed&&e.jsx("div",{className:"flex items-center justify-center gap-2 py-2",children:e.jsxs(I,{size:"sm",color:"success",variant:"flat",startContent:e.jsx(v,{icon:"heroicons:check"}),children:["Task Completed: ",s.task_completed_reason]})})]},r)),t.status==="running"&&e.jsxs("div",{className:"flex items-center justify-center gap-2 py-4",children:[e.jsx(v,{icon:"heroicons:arrow-path",className:"animate-spin text-primary"}),e.jsxs("span",{className:"text-sm text-foreground-500",children:["Processing turn ",t.currentTurn+1,"..."]})]}),t.status==="completed"&&e.jsx("div",{className:"flex items-center justify-center gap-2 py-4",children:e.jsx(I,{color:"success",variant:"flat",startContent:e.jsx(v,{icon:"heroicons:check"}),children:"Scenario Completed"})}),t.status==="failed"&&e.jsxs("div",{className:"flex flex-col items-center justify-center gap-2 py-4",children:[e.jsx(I,{color:"danger",variant:"flat",startContent:e.jsx(v,{icon:"heroicons:x-mark"}),children:"Scenario Failed"}),t.error&&e.jsx("p",{className:"text-sm text-danger",children:t.error})]}),t.status==="timeout"&&e.jsxs("div",{className:"flex flex-col items-center justify-center gap-2 py-4",children:[e.jsx(I,{color:"warning",variant:"flat",startContent:e.jsx(v,{icon:"heroicons:clock"}),children:"Scenario Timed Out"}),t.error&&e.jsx("p",{className:"text-sm text-warning",children:t.error})]})]})})}function wt(){const{theme:t,setTheme:a}=Es(),s=t===ke.DARK,r=()=>a(s?ke.LIGHT:ke.DARK),n=P(o=>o.evalView);return n==="scenario-detail"?e.jsxs("div",{className:"flex h-screen flex-col overflow-hidden bg-background",children:[e.jsxs("header",{className:"flex items-center justify-between border-b border-divider px-6 py-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl",children:"И"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-semibold text-foreground",children:"Ragbits Evaluation"}),e.jsx("p",{className:"text-xs text-foreground-500",children:"Scenario Details"})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(K,{isIconOnly:!0,variant:"light",onPress:r,"aria-label":"Toggle theme",children:e.jsx(v,{icon:s?"heroicons:sun":"heroicons:moon",className:"text-xl"})})})]}),e.jsx("main",{className:"flex-1 min-h-0 overflow-hidden",children:e.jsx(yt,{})})]}):n==="runner"?e.jsxs("div",{className:"flex h-screen flex-col overflow-hidden bg-background",children:[e.jsxs("header",{className:"flex items-center justify-between border-b border-divider px-6 py-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl",children:"И"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-semibold text-foreground",children:"Ragbits Evaluation"}),e.jsx("p",{className:"text-xs text-foreground-500",children:"Scenario Runner"})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(K,{isIconOnly:!0,variant:"light",onPress:r,"aria-label":"Toggle theme",children:e.jsx(v,{icon:s?"heroicons:sun":"heroicons:moon",className:"text-xl"})})})]}),e.jsx("main",{className:"flex-1 min-h-0 overflow-hidden",children:e.jsx(Nt,{})})]}):e.jsxs("div",{className:"flex h-screen flex-col overflow-hidden bg-background",children:[e.jsxs("header",{className:"flex items-center justify-between border-b border-divider px-6 py-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl",children:"И"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-semibold text-foreground",children:"Ragbits Evaluation"}),e.jsx("p",{className:"text-xs text-foreground-500",children:"Test scenarios and view results"})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(K,{isIconOnly:!0,variant:"light",onPress:r,"aria-label":"Toggle theme",children:e.jsx(v,{icon:s?"heroicons:sun":"heroicons:moon",className:"text-xl"})})})]}),e.jsx(gt,{}),e.jsxs("div",{className:"flex flex-1 min-h-0 overflow-hidden",children:[e.jsx("aside",{className:"w-80 flex-shrink-0 border-r border-divider overflow-y-auto",children:e.jsx(ft,{})}),e.jsx("main",{className:"flex-1 min-h-0 overflow-hidden",children:e.jsx(jt,{})})]})]})}const St=new URLSearchParams(window.location.search).has("mock");function _t(){const{client:t}=ve(),a=Q(),s=P(o=>o.isConfigLoading),r=P(o=>o.configError),n=f.useRef(!1);return f.useEffect(()=>{if(n.current)return;if(n.current=!0,St){a.getState().actions.loadMockData();return}async function o(){const{setConfigLoading:d,setConfig:l,setConfigError:c}=a.getState().actions;d(!0);try{const u=await t.makeRequest("/api/eval/config");l(u)}catch(u){c(u instanceof Error?u.message:"Failed to load config")}}o()},[t,a]),s?e.jsx("div",{className:"flex h-full items-center justify-center bg-background",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx(Qe,{size:"lg"}),e.jsx("p",{className:"text-foreground-500",children:"Loading evaluation configuration..."})]})}):r?e.jsx("div",{className:"flex h-full items-center justify-center bg-background",children:e.jsxs("div",{className:"flex flex-col items-center gap-4 text-center",children:[e.jsx("div",{className:"text-6xl",children:"!"}),e.jsx("h1",{className:"text-xl font-semibold text-danger",children:"Failed to Connect"}),e.jsx("p",{className:"max-w-md text-foreground-500",children:"Could not connect to the evaluation API. Make sure the EvalAPI server is running."}),e.jsx("p",{className:"text-sm text-foreground-400",children:r}),e.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 rounded-lg bg-primary px-4 py-2 text-white hover:bg-primary-600",children:"Retry"})]})}):e.jsx(wt,{})}const Ct="";As(["heroicons:check","heroicons:x-mark","heroicons:play","heroicons:stop","heroicons:arrow-path","heroicons:sun","heroicons:moon","heroicons:chevron-down","heroicons:chevron-right","heroicons:document-text","heroicons:clipboard","heroicons:trash","heroicons:pencil","heroicons:eye","heroicons:chart-bar","heroicons:chat-bubble-left-right","heroicons:clock","heroicons:currency-dollar","heroicons:cpu-chip"]);Ks.createRoot(document.getElementById("root")).render(e.jsx(f.StrictMode,{children:e.jsx(Ls,{children:e.jsx(Fs,{baseUrl:Ct,children:e.jsx(Ms,{children:e.jsx(xt,{children:e.jsx(Hs,{children:e.jsx(_t,{})})})})})})}));
